System.register([],(function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");function t(e,t){const n=Object.create(null),o=e.split(",");for(let r=0;r<o.length;r++)n[o[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}e.textContent=':root{--baklava-control-color-primary: #e28b46;--baklava-control-color-error: #d00000;--baklava-control-color-background: #2c3748;--baklava-control-color-foreground: white;--baklava-control-color-hover: #455670;--baklava-control-color-active: #556986;--baklava-control-color-disabled-foreground: #666c75;--baklava-control-border-radius: 3px;--baklava-sidebar-color-background: #1b202c;--baklava-sidebar-color-foreground: white;--baklava-node-color-background: #1b202c;--baklava-node-color-foreground: white;--baklava-node-color-selected: var(--baklava-control-color-primary);--baklava-node-title-color-background: #151a24;--baklava-node-title-color-foreground: white;--baklava-group-node-title-color-background: #215636;--baklava-group-node-title-color-foreground: white;--baklava-node-border-radius: 6px;--baklava-color-connection-default: #737f96;--baklava-color-connection-allowed: #48bc79;--baklava-color-connection-forbidden: #bc4848;--baklava-editor-background-pattern-default: #202b3c;--baklava-editor-background-pattern-line: #263140;--baklava-editor-background-pattern-black: #263140;--baklava-context-menu-background: #1b202c;--baklava-context-menu-shadow: 0 0 8px rgba(0, 0, 0, .65);--baklava-toolbar-background: #1b202caa;--baklava-toolbar-foreground: white;--baklava-node-palette-background: #1b202caa;--baklava-node-palette-foreground: white;--baklava-visual-transition: .1s linear}.baklava-button{background-color:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);transition:background-color var(--baklava-visual-transition);border:none;padding:.45em .35em;border-radius:var(--baklava-control-border-radius);font-size:inherit;cursor:pointer;overflow-x:hidden}.baklava-button:hover{background-color:var(--baklava-control-color-hover)}.baklava-button:active{background-color:var(--baklava-control-color-primary)}.baklava-button.--block{width:100%}.baklava-checkbox{display:flex;padding:.35em 0;cursor:pointer;overflow-x:hidden;align-items:center}.baklava-checkbox .__checkmark-container{display:flex;background-color:var(--baklava-control-color-background);border-radius:var(--baklava-control-border-radius);transition:background-color var(--baklava-visual-transition);width:18px;height:18px}.baklava-checkbox:hover .__checkmark-container{background-color:var(--baklava-control-color-hover)}.baklava-checkbox:active .__checkmark-container{background-color:var(--baklava-control-color-active)}.baklava-checkbox .__checkmark{stroke-dasharray:15;stroke-dashoffset:15;stroke:var(--baklava-control-color-foreground);stroke-width:2px;fill:none;transition:stroke-dashoffset var(--baklava-visual-transition)}.baklava-checkbox.--checked .__checkmark{stroke-dashoffset:0}.baklava-checkbox.--checked .__checkmark-container{background-color:var(--baklava-control-color-primary)}.baklava-checkbox .__label{margin-left:.5rem}.baklava-context-menu{color:var(--baklava-control-color-foreground);position:absolute;display:inline-block;z-index:100;background-color:var(--baklava-context-menu-background);box-shadow:var(--baklava-context-menu-shadow);border-radius:0 0 var(--baklava-control-border-radius) var(--baklava-control-border-radius);min-width:6rem;width:max-content}.baklava-context-menu>.item{display:flex;align-items:center;padding:.35em 1em;transition:background .05s linear;position:relative}.baklava-context-menu>.item>.__label{flex:1 1 auto}.baklava-context-menu>.item>.__submenu-icon{margin-left:.75rem}.baklava-context-menu>.item.--disabled{color:var(--baklava-control-color-hover)}.baklava-context-menu>.item:not(.--header):not(.--active):not(.--disabled):hover{background:var(--baklava-control-color-primary)}.baklava-context-menu>.item.--active{background:var(--baklava-control-color-primary)}.baklava-context-menu.--nested{left:100%;top:0}.baklava-context-menu.--flipped-x.--nested{left:unset;right:100%}.baklava-context-menu.--flipped-y.--nested{top:unset;bottom:0}.baklava-context-menu>.divider{margin:.35em 0;height:1px;background-color:var(--baklava-control-color-hover)}.baklava-icon{display:block;height:100%}.baklava-icon.--clickable{cursor:pointer;transition:color var(--baklava-visual-transition)}.baklava-icon.--clickable:hover{color:var(--baklava-control-color-primary)}.baklava-input{background-color:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);caret-color:var(--baklava-control-color-primary);border:none;border-radius:var(--baklava-control-border-radius);padding:.45em .75em;width:100%;transition:background-color var(--baklava-visual-transition);font-size:inherit;font:inherit}.baklava-input:hover{background-color:var(--baklava-control-color-hover)}.baklava-input:active{background-color:var(--baklava-control-color-active)}.baklava-input:focus-visible{outline:1px solid var(--baklava-control-color-primary)}.baklava-input[type=number]::-webkit-inner-spin-button,.baklava-input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.baklava-input.--invalid{box-shadow:0 0 2px 2px var(--baklava-control-color-error)}.baklava-num-input{background:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);border-radius:var(--baklava-control-border-radius);width:100%;display:grid;grid-template-columns:20px 1fr 20px}.baklava-num-input>.__button{display:flex;flex:0 0 auto;width:20px;justify-content:center;align-items:center;transition:background var(--baklava-visual-transition);cursor:pointer}.baklava-num-input>.__button:hover{background-color:var(--baklava-control-color-hover)}.baklava-num-input>.__button:active{background-color:var(--baklava-control-color-active)}.baklava-num-input>.__button.--dec{grid-area:1/1/span 1/span 1}.baklava-num-input>.__button.--dec>svg{transform:rotate(90deg)}.baklava-num-input>.__button.--inc{grid-area:1/3/span 1/span 1}.baklava-num-input>.__button.--inc>svg{transform:rotate(-90deg)}.baklava-num-input>.__button path{stroke:var(--baklava-control-color-foreground);fill:var(--baklava-control-color-foreground)}.baklava-num-input>.__content{grid-area:1/2/span 1/span 1;display:inline-flex;cursor:pointer;max-width:100%;min-width:0;align-items:center;transition:background-color var(--baklava-visual-transition)}.baklava-num-input>.__content:hover{background-color:var(--baklava-control-color-hover)}.baklava-num-input>.__content:active{background-color:var(--baklava-control-color-active)}.baklava-num-input>.__content>.__label,.baklava-num-input>.__content>.__value{margin:.35em 0;padding:0 .5em}.baklava-num-input>.__content>.__label{flex:1;min-width:0;overflow:hidden}.baklava-num-input>.__content>.__value{text-align:right}.baklava-num-input>.__content>input{background-color:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);caret-color:var(--baklava-control-color-primary);padding:.35em;width:100%}.baklava-select{width:100%;position:relative;color:var(--baklava-control-color-foreground)}.baklava-select.--open>.__selected{border-bottom-left-radius:0;border-bottom-right-radius:0}.baklava-select.--open>.__selected>.__icon{transform:rotate(180deg)}.baklava-select>.__selected{background-color:var(--baklava-control-color-background);padding:.35em .75em;border-radius:var(--baklava-control-border-radius);transition:background var(--baklava-visual-transition);min-height:1.7em;display:flex;align-items:center;cursor:pointer}.baklava-select>.__selected:hover{background:var(--baklava-control-color-hover)}.baklava-select>.__selected:active{background:var(--baklava-control-color-active)}.baklava-select>.__selected>.__text{flex:1 0 auto;flex-basis:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.baklava-select>.__selected>.__icon{flex:0 0 auto;display:flex;justify-content:center;align-items:center;transition:transform .25s ease;width:18px;height:18px}.baklava-select>.__selected>.__icon path{stroke:var(--baklava-control-color-foreground);fill:var(--baklava-control-color-foreground)}.baklava-select>.__dropdown{position:absolute;top:100%;left:0;right:0;z-index:10;background-color:var(--baklava-context-menu-background);filter:drop-shadow(0 0 4px black);border-radius:0 0 var(--baklava-control-border-radius) var(--baklava-control-border-radius);max-height:15em;overflow-y:scroll}.baklava-select>.__dropdown::-webkit-scrollbar{width:0px;background:transparent}.baklava-select>.__dropdown>.item{padding:.35em .35em .35em 1em;transition:background .05s linear}.baklava-select>.__dropdown>.item:not(.--header):not(.--active){cursor:pointer}.baklava-select>.__dropdown>.item:not(.--header):not(.--active):hover{background:var(--baklava-control-color-hover)}.baklava-select>.__dropdown>.item.--active{background:var(--baklava-control-color-primary)}.baklava-select>.__dropdown>.item.--header{color:var(--baklava-control-color-disabled-foreground);border-bottom:1px solid var(--baklava-control-color-disabled-foreground);padding:.5em .35em .5em 1em}.baklava-slider{background:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);border-radius:var(--baklava-control-border-radius);position:relative;cursor:pointer}.baklava-slider>.__content{display:flex;position:relative;z-index:1}.baklava-slider>.__content>.__label,.baklava-slider>.__content>.__value{flex:1 1 auto;margin:.35em 0;padding:0 .5em;text-overflow:ellipsis}.baklava-slider>.__content>.__value{text-align:right}.baklava-slider>.__content>input{background-color:var(--baklava-control-color-background);color:var(--baklava-control-color-foreground);caret-color:var(--baklava-control-color-primary);padding:.35em;width:100%}.baklava-slider>.__slider{position:absolute;top:0;bottom:0;left:0;background-color:var(--baklava-control-color-primary);border-radius:var(--baklava-control-border-radius)}.baklava-connection{stroke:var(--baklava-color-connection-default);stroke-width:2px;fill:none}.baklava-connection.--temporary{stroke-width:4px;stroke-dasharray:5 5;stroke-dashoffset:0;animation:dash 1s linear infinite;transform:translateY(-1px)}@keyframes dash{to{stroke-dashoffset:20}}.baklava-connection.--allowed{stroke:var(--baklava-color-connection-allowed)}.baklava-connection.--forbidden{stroke:var(--baklava-color-connection-forbidden)}.minimap{position:absolute;height:15%;width:15%;min-width:150px;max-width:90%;top:20px;right:20px;z-index:900}.baklava-editor{width:100%;height:100%;position:relative;overflow:hidden;outline:none!important;font-family:Lato,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:15px;touch-action:none}.baklava-editor .background{background-color:var(--baklava-editor-background-pattern-default);background-image:linear-gradient(var(--baklava-editor-background-pattern-black) 2px,transparent 2px),linear-gradient(90deg,var(--baklava-editor-background-pattern-black) 2px,transparent 2px),linear-gradient(var(--baklava-editor-background-pattern-line) 1px,transparent 1px),linear-gradient(90deg,var(--baklava-editor-background-pattern-line) 1px,transparent 1px);background-repeat:repeat;width:100%;height:100%;pointer-events:none!important}.baklava-editor *:not(input):not(textarea){user-select:none;-moz-user-select:none;-webkit-user-select:none;touch-action:none}.baklava-editor .input-user-select{user-select:auto;-moz-user-select:auto;-webkit-user-select:auto}.baklava-editor *,.baklava-editor *:after,.baklava-editor *:before{box-sizing:border-box}.baklava-editor.--temporary-connection{cursor:crosshair}.baklava-editor .connections-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none!important}.baklava-editor .node-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.baklava-editor .node-container *{pointer-events:all}.baklava-ignore-mouse *{pointer-events:none!important}.baklava-ignore-mouse .__port{pointer-events:all!important}.baklava-node-interface{padding:.25em 0;position:relative}.baklava-node-interface .__port{position:absolute;width:10px;height:10px;background:white;border-radius:50%;top:calc(50% - 5px);cursor:crosshair}.baklava-node-interface.--input{text-align:left;padding-left:.5em}.baklava-node-interface.--input .__port{left:-1.1em}.baklava-node-interface.--output{text-align:right;padding-right:.5em}.baklava-node-interface.--output .__port{right:-1.1em}.baklava-node-palette{position:absolute;left:0;top:60px;width:250px;height:calc(100% - 60px);z-index:3;padding:2rem;overflow-y:auto;background:var(--baklava-node-palette-background);color:var(--baklava-node-palette-foreground)}.baklava-node-palette h1{margin-top:2rem}.baklava-node.--palette{position:unset;margin:1rem 0;cursor:grab}.baklava-node.--palette:first-child{margin-top:0}.baklava-node.--palette .__title{padding:.5rem;border-radius:var(--baklava-node-border-radius)}.baklava-dragged-node{position:absolute;width:calc(250px - 4rem);height:40px;z-index:4;pointer-events:none}.baklava-node{max-width:20rem;background:var(--baklava-node-color-background);color:var(--baklava-node-color-foreground);border-radius:var(--baklava-node-border-radius);position:absolute;filter:drop-shadow(0 0 3px rgba(0,0,0,.8));transition:box-shadow var(--baklava-visual-transition),filter var(--baklava-visual-transition)}.baklava-node:hover{box-shadow:0 0 0 .35px var(--baklava-node-color-selected)}.baklava-node.--selected{z-index:5;box-shadow:0 0 0 1px var(--baklava-node-color-selected)}.baklava-node.--dragging{filter:drop-shadow(0 0 7px rgba(0,0,0,.8))}.baklava-node.--dragging>.__title{cursor:grabbing}.baklava-node>.__title{display:flex;background:var(--baklava-node-title-color-background);color:var(--baklava-node-title-color-foreground);padding:.4em .75em;border-radius:var(--baklava-node-border-radius) var(--baklava-node-border-radius) 0 0;cursor:grab}.baklava-node>.__title>*:first-child{flex-grow:1}.baklava-node>.__title>.__title-label{pointer-events:none}.baklava-node>.__title>.__menu{position:relative;cursor:initial}.baklava-node[data-node-type^=__baklava_]>.__title{background:var(--baklava-group-node-title-color-background);color:var(--baklava-group-node-title-color-foreground)}.baklava-node>.__content{padding:.75em}.baklava-node>.__content>div>div{margin:.5em 0}.baklava-node.--two-column>.__content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto;grid-template-areas:". ." ". ."}.baklava-node.--two-column>.__content>.__inputs{grid-row:1;grid-column:1}.baklava-node.--two-column>.__content>.__outputs{grid-row:1;grid-column:2}.baklava-sidebar{position:absolute;height:100%;width:25%;min-width:300px;max-width:90%;top:0;right:0;z-index:1000;background-color:var(--baklava-sidebar-color-background);color:var(--baklava-sidebar-color-foreground);box-shadow:none;overflow-x:hidden;padding:1em;transform:translate(100%);transition:transform .5s;display:flex;flex-direction:column}.baklava-sidebar.--open{transform:translate(0);box-shadow:0 0 15px #000}.baklava-sidebar .__resizer{position:absolute;left:0;top:0;height:100%;width:4px;cursor:col-resize}.baklava-sidebar .__header{display:flex;align-items:center}.baklava-sidebar .__header .__node-name{margin-left:.5rem}.baklava-sidebar .__close{font-size:2em;border:none;background:none;color:inherit;cursor:pointer}.baklava-sidebar .__interface{margin:.5em 0}.baklava-toolbar{position:absolute;left:0;top:0;width:100%;height:60px;z-index:3;padding:.5rem 2rem;background:var(--baklava-toolbar-background);color:var(--baklava-toolbar-foreground);display:flex;align-items:center}.baklava-toolbar-entry{margin-left:.5rem;margin-right:.5rem}.baklava-toolbar-button{color:var(--baklava-toolbar-foreground);background:none;border:none;transition:color var(--baklava-visual-transition)}.baklava-toolbar-button:not([disabled]){cursor:pointer}.baklava-toolbar-button:hover:not([disabled]){color:var(--baklava-control-color-primary)}.baklava-toolbar-button[disabled]{color:var(--baklava-control-color-disabled-foreground)}.slide-fade-enter-active,.slide-fade-leave-active{transition:all .1s ease-out}.slide-fade-enter-from,.slide-fade-leave-to{transform:translateY(5px);opacity:0}.fade-enter-active,.fade-leave-active{transition:opacity .1s ease-out!important}.fade-enter-from,.fade-leave-to{opacity:0}\n',document.head.appendChild(e);const n={},o=[],r=()=>{},a=()=>!1,i=/^on[^a-z]/,s=e=>i.test(e),l=e=>e.startsWith("onUpdate:"),c=Object.assign,u=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},d=Object.prototype.hasOwnProperty,p=(e,t)=>d.call(e,t),h=Array.isArray,v=e=>"[object Map]"===_(e),f=e=>"[object Set]"===_(e),m=e=>"function"==typeof e,g=e=>"string"==typeof e,b=e=>"symbol"==typeof e,y=e=>null!==e&&"object"==typeof e,k=e=>y(e)&&m(e.then)&&m(e.catch),w=Object.prototype.toString,_=e=>w.call(e),x=e=>_(e).slice(8,-1),C=e=>"[object Object]"===_(e),E=e=>g(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,S=t(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},N=/-(\w)/g,O=I((e=>e.replace(N,((e,t)=>t?t.toUpperCase():"")))),M=/\B([A-Z])/g,T=I((e=>e.replace(M,"-$1").toLowerCase())),A=I((e=>e.charAt(0).toUpperCase()+e.slice(1))),P=I((e=>e?`on${A(e)}`:"")),j=(e,t)=>!Object.is(e,t),R=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},$=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},D=e=>{const t=parseFloat(e);return isNaN(t)?e:t},L=e=>{const t=g(e)?Number(e):NaN;return isNaN(t)?e:t};let U;const V=()=>U||(U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function F(e){if(h(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=g(o)?z(o):F(o);if(r)for(const e in r)t[e]=r[e]}return t}return g(e)||y(e)?e:void 0}const H=/;(?![^(]*\))/g,B=/:([^]+)/,G=/\/\*[^]*?\*\//g;function z(e){const t={};return e.replace(G,"").split(H).forEach((e=>{if(e){const n=e.split(B);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function W(e){let t="";if(g(e))t=e;else if(h(e))for(let n=0;n<e.length;n++){const o=W(e[n]);o&&(t+=o+" ")}else if(y(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const q=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function K(e){return!!e||""===e}const X=e=>g(e)?e:null==e?"":h(e)||y(e)&&(e.toString===w||!m(e.toString))?JSON.stringify(e,Y,2):String(e),Y=(e,t)=>t&&t.__v_isRef?Y(e,t.value):v(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:f(t)?{[`Set(${t.size})`]:[...t.values()]}:!y(t)||h(t)||C(t)?t:String(t);let J;class Z{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=J,!e&&J&&(this.index=(J.scopes||(J.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=J;try{return J=this,e()}finally{J=t}}}on(){J=this}off(){J=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function Q(){return J}const ee=e=>{const t=new Set(e);return t.w=0,t.n=0,t},te=e=>(e.w&ae)>0,ne=e=>(e.n&ae)>0,oe=new WeakMap;let re=0,ae=1;const ie=30;let se;const le=Symbol(""),ce=Symbol("");class ue{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,function(e,t=J){t&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();let e=se,t=pe;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=se,se=this,pe=!0,ae=1<<++re,re<=ie?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ae})(this):de(this),this.fn()}finally{re<=ie&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){const r=t[o];te(r)&&!ne(r)?r.delete(e):t[n++]=r,r.w&=~ae,r.n&=~ae}t.length=n}})(this),ae=1<<--re,se=this.parent,pe=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){se===this?this.deferStop=!0:this.active&&(de(this),this.onStop&&this.onStop(),this.active=!1)}}function de(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let pe=!0;const he=[];function ve(){he.push(pe),pe=!1}function fe(){const e=he.pop();pe=void 0===e||e}function me(e,t,n){if(pe&&se){let t=oe.get(e);t||oe.set(e,t=new Map);let o=t.get(n);o||t.set(n,o=ee()),ge(o)}}function ge(e,t){let n=!1;re<=ie?ne(e)||(e.n|=ae,n=!te(e)):n=!e.has(se),n&&(e.add(se),se.deps.push(e))}function be(e,t,n,o,r,a){const i=oe.get(e);if(!i)return;let s=[];if("clear"===t)s=[...i.values()];else if("length"===n&&h(e)){const e=Number(o);i.forEach(((t,n)=>{("length"===n||n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(i.get(n)),t){case"add":h(e)?E(n)&&s.push(i.get("length")):(s.push(i.get(le)),v(e)&&s.push(i.get(ce)));break;case"delete":h(e)||(s.push(i.get(le)),v(e)&&s.push(i.get(ce)));break;case"set":v(e)&&s.push(i.get(le))}if(1===s.length)s[0]&&ye(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);ye(ee(e))}}function ye(e,t){const n=h(e)?e:[...e];for(const o of n)o.computed&&ke(o);for(const o of n)o.computed||ke(o)}function ke(e,t){(e!==se||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const we=t("__proto__,__v_isRef,__isVue"),_e=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(b)),xe=Me(),Ce=Me(!1,!0),Ee=Me(!0),Se=Me(!0,!0),Ie=Ne();function Ne(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ft(this);for(let t=0,r=this.length;t<r;t++)me(n,0,t+"");const o=n[t](...e);return-1===o||!1===o?n[t](...e.map(ft)):o}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){ve();const n=ft(this)[t].apply(this,e);return fe(),n}})),e}function Oe(e){const t=ft(this);return me(t,0,e),t.hasOwnProperty(e)}function Me(e=!1,t=!1){return function(n,o,r){if("__v_isReactive"===o)return!e;if("__v_isReadonly"===o)return e;if("__v_isShallow"===o)return t;if("__v_raw"===o&&r===(e?t?st:it:t?at:rt).get(n))return n;const a=h(n);if(!e){if(a&&p(Ie,o))return Reflect.get(Ie,o,r);if("hasOwnProperty"===o)return Oe}const i=Reflect.get(n,o,r);return(b(o)?_e.has(o):we(o))?i:(e||me(n,0,o),t?i:wt(i)?a&&E(o)?i:i.value:y(i)?e?ct(i):lt(i):i)}}function Te(e=!1){return function(t,n,o,r){let a=t[n];if(pt(a)&&wt(a)&&!wt(o))return!1;if(!e&&(ht(o)||pt(o)||(a=ft(a),o=ft(o)),!h(t)&&wt(a)&&!wt(o)))return a.value=o,!0;const i=h(t)&&E(n)?Number(n)<t.length:p(t,n),s=Reflect.set(t,n,o,r);return t===ft(r)&&(i?j(o,a)&&be(t,"set",n,o):be(t,"add",n,o)),s}}const Ae={get:xe,set:Te(),deleteProperty:function(e,t){const n=p(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&n&&be(e,"delete",t,void 0),o},has:function(e,t){const n=Reflect.has(e,t);return b(t)&&_e.has(t)||me(e,0,t),n},ownKeys:function(e){return me(e,0,h(e)?"length":le),Reflect.ownKeys(e)}},Pe={get:Ee,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},je=c({},Ae,{get:Ce,set:Te(!0)}),Re=c({},Pe,{get:Se}),$e=e=>e,De=e=>Reflect.getPrototypeOf(e);function Le(e,t,n=!1,o=!1){const r=ft(e=e.__v_raw),a=ft(t);n||(t!==a&&me(r,0,t),me(r,0,a));const{has:i}=De(r),s=o?$e:n?bt:gt;return i.call(r,t)?s(e.get(t)):i.call(r,a)?s(e.get(a)):void(e!==r&&e.get(t))}function Ue(e,t=!1){const n=this.__v_raw,o=ft(n),r=ft(e);return t||(e!==r&&me(o,0,e),me(o,0,r)),e===r?n.has(e):n.has(e)||n.has(r)}function Ve(e,t=!1){return e=e.__v_raw,!t&&me(ft(e),0,le),Reflect.get(e,"size",e)}function Fe(e){e=ft(e);const t=ft(this);return De(t).has.call(t,e)||(t.add(e),be(t,"add",e,e)),this}function He(e,t){t=ft(t);const n=ft(this),{has:o,get:r}=De(n);let a=o.call(n,e);a||(e=ft(e),a=o.call(n,e));const i=r.call(n,e);return n.set(e,t),a?j(t,i)&&be(n,"set",e,t):be(n,"add",e,t),this}function Be(e){const t=ft(this),{has:n,get:o}=De(t);let r=n.call(t,e);r||(e=ft(e),r=n.call(t,e)),o&&o.call(t,e);const a=t.delete(e);return r&&be(t,"delete",e,void 0),a}function Ge(){const e=ft(this),t=0!==e.size,n=e.clear();return t&&be(e,"clear",void 0,void 0),n}function ze(e,t){return function(n,o){const r=this,a=r.__v_raw,i=ft(a),s=t?$e:e?bt:gt;return!e&&me(i,0,le),a.forEach(((e,t)=>n.call(o,s(e),s(t),r)))}}function We(e,t,n){return function(...o){const r=this.__v_raw,a=ft(r),i=v(a),s="entries"===e||e===Symbol.iterator&&i,l="keys"===e&&i,c=r[e](...o),u=n?$e:t?bt:gt;return!t&&me(a,0,l?ce:le),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function qe(e){return function(...t){return"delete"!==e&&this}}function Ke(){const e={get(e){return Le(this,e)},get size(){return Ve(this)},has:Ue,add:Fe,set:He,delete:Be,clear:Ge,forEach:ze(!1,!1)},t={get(e){return Le(this,e,!1,!0)},get size(){return Ve(this)},has:Ue,add:Fe,set:He,delete:Be,clear:Ge,forEach:ze(!1,!0)},n={get(e){return Le(this,e,!0)},get size(){return Ve(this,!0)},has(e){return Ue.call(this,e,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:ze(!0,!1)},o={get(e){return Le(this,e,!0,!0)},get size(){return Ve(this,!0)},has(e){return Ue.call(this,e,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:ze(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=We(r,!1,!1),n[r]=We(r,!0,!1),t[r]=We(r,!1,!0),o[r]=We(r,!0,!0)})),[e,n,t,o]}const[Xe,Ye,Je,Ze]=Ke();function Qe(e,t){const n=t?e?Ze:Je:e?Ye:Xe;return(t,o,r)=>"__v_isReactive"===o?!e:"__v_isReadonly"===o?e:"__v_raw"===o?t:Reflect.get(p(n,o)&&o in t?n:t,o,r)}const et={get:Qe(!1,!1)},tt={get:Qe(!1,!0)},nt={get:Qe(!0,!1)},ot={get:Qe(!0,!0)},rt=new WeakMap,at=new WeakMap,it=new WeakMap,st=new WeakMap;function lt(e){return pt(e)?e:ut(e,!1,Ae,et,rt)}function ct(e){return ut(e,!0,Pe,nt,it)}function ut(e,t,n,o,r){if(!y(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=r.get(e);if(a)return a;const i=(s=e).__v_skip||!Object.isExtensible(s)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(x(s));var s;if(0===i)return e;const l=new Proxy(e,2===i?o:n);return r.set(e,l),l}function dt(e){return pt(e)?dt(e.__v_raw):!(!e||!e.__v_isReactive)}function pt(e){return!(!e||!e.__v_isReadonly)}function ht(e){return!(!e||!e.__v_isShallow)}function vt(e){return dt(e)||pt(e)}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function mt(e){return $(e,"__v_skip",!0),e}const gt=e=>y(e)?lt(e):e,bt=e=>y(e)?ct(e):e;function yt(e){pe&&se&&ge((e=ft(e)).dep||(e.dep=ee()))}function kt(e,t){const n=(e=ft(e)).dep;n&&ye(n)}function wt(e){return!(!e||!0!==e.__v_isRef)}function _t(e){return n=!1,wt(t=e)?t:new xt(t,n);var t,n}class xt{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ft(e),this._value=t?e:gt(e)}get value(){return yt(this),this._value}set value(e){const t=this.__v_isShallow||ht(e)||pt(e);e=t?e:ft(e),j(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:gt(e),kt(this))}}function Ct(e){return wt(e)?e.value:e}const Et={get:(e,t,n)=>Ct(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return wt(r)&&!wt(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function St(e){return dt(e)?e:new Proxy(e,Et)}class It{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>yt(this)),(()=>kt(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}class Nt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return e=ft(this._object),t=this._key,null==(n=oe.get(e))?void 0:n.get(t);var e,t,n}}class Ot{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Mt(e,t,n){return wt(e)?e:m(e)?new Ot(e):y(e)&&arguments.length>1?Tt(e,t,n):_t(e)}function Tt(e,t,n){const o=e[t];return wt(o)?o:new Nt(e,t,n)}class At{constructor(e,t,n,o){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ue(e,(()=>{this._dirty||(this._dirty=!0,kt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const e=ft(this);return yt(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Pt(e,t,n,o){let r;try{r=o?e(...o):e()}catch(a){Rt(a,t,n)}return r}function jt(e,t,n,o){if(m(e)){const r=Pt(e,t,n,o);return r&&k(r)&&r.catch((e=>{Rt(e,t,n)})),r}const r=[];for(let a=0;a<e.length;a++)r.push(jt(e[a],t,n,o));return r}function Rt(e,t,n,o=!0){if(t&&t.vnode,t){let o=t.parent;const r=t.proxy,a=n;for(;o;){const t=o.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,a))return;o=o.parent}const i=t.appContext.config.errorHandler;if(i)return void Pt(i,null,10,[e,r,a])}!function(e,t,n,o=!0){console.error(e)}(e,0,0,o)}let $t=!1,Dt=!1;const Lt=[];let Ut=0;const Vt=[];let Ft=null,Ht=0;const Bt=Promise.resolve();let Gt=null;function zt(e){const t=Gt||Bt;return e?t.then(this?e.bind(this):e):t}function Wt(e){Lt.length&&Lt.includes(e,$t&&e.allowRecurse?Ut+1:Ut)||(null==e.id?Lt.push(e):Lt.splice(function(e){let t=Ut+1,n=Lt.length;for(;t<n;){const o=t+n>>>1;Yt(Lt[o])<e?t=o+1:n=o}return t}(e.id),0,e),qt())}function qt(){$t||Dt||(Dt=!0,Gt=Bt.then(Zt))}function Kt(e,t=($t?Ut+1:0)){for(;t<Lt.length;t++){const e=Lt[t];e&&e.pre&&(Lt.splice(t,1),t--,e())}}function Xt(e){if(Vt.length){const e=[...new Set(Vt)];if(Vt.length=0,Ft)return void Ft.push(...e);for(Ft=e,Ft.sort(((e,t)=>Yt(e)-Yt(t))),Ht=0;Ht<Ft.length;Ht++)Ft[Ht]();Ft=null,Ht=0}}const Yt=e=>null==e.id?1/0:e.id,Jt=(e,t)=>{const n=Yt(e)-Yt(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Zt(e){Dt=!1,$t=!0,Lt.sort(Jt);try{for(Ut=0;Ut<Lt.length;Ut++){const e=Lt[Ut];e&&!1!==e.active&&Pt(e,null,14)}}finally{Ut=0,Lt.length=0,Xt(),$t=!1,Gt=null,(Lt.length||Vt.length)&&Zt()}}function Qt(e,t,...o){if(e.isUnmounted)return;const r=e.vnode.props||n;let a=o;const i=t.startsWith("update:"),s=i&&t.slice(7);if(s&&s in r){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:i}=r[e]||n;i&&(a=o.map((e=>g(e)?e.trim():e))),t&&(a=o.map(D))}let l,c=r[l=P(t)]||r[l=P(O(t))];!c&&i&&(c=r[l=P(T(t))]),c&&jt(c,e,6,a);const u=r[l+"Once"];if(u){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,jt(u,e,6,a)}}function en(e,t,n=!1){const o=t.emitsCache,r=o.get(e);if(void 0!==r)return r;const a=e.emits;let i={},s=!1;if(!m(e)){const o=e=>{const n=en(e,t,!0);n&&(s=!0,c(i,n))};!n&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return a||s?(h(a)?a.forEach((e=>i[e]=null)):c(i,a),y(e)&&o.set(e,i),i):(y(e)&&o.set(e,null),null)}function tn(e,t){return!(!e||!s(t))&&(t=t.slice(2).replace(/Once$/,""),p(e,t[0].toLowerCase()+t.slice(1))||p(e,T(t))||p(e,t))}let nn=null,on=null;function rn(e){const t=nn;return nn=e,on=e&&e.type.__scopeId||null,t}function an(e,t=nn,n){if(!t)return e;if(e._n)return e;const o=(...n)=>{o._d&&tr(-1);const r=rn(t);let a;try{a=e(...n)}finally{rn(r),o._d&&tr(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function sn(e){const{type:t,vnode:n,proxy:o,withProxy:r,props:a,propsOptions:[i],slots:s,attrs:c,emit:u,render:d,renderCache:p,data:h,setupState:v,ctx:f,inheritAttrs:m}=e;let g,b;const y=rn(e);try{if(4&n.shapeFlag){const e=r||o;g=mr(d.call(e,e,p,a,v,h,f)),b=c}else{const e=t;g=mr(e.length>1?e(a,{attrs:c,slots:s,emit:u}):e(a,null)),b=t.props?c:ln(c)}}catch(w){Jo.length=0,Rt(w,e,1),g=dr(Xo)}let k=g;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=k;e.length&&7&t&&(i&&e.some(l)&&(b=cn(b,i)),k=pr(k,b))}return n.dirs&&(k=pr(k),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&(k.transition=n.transition),g=k,rn(y),g}const ln=e=>{let t;for(const n in e)("class"===n||"style"===n||s(n))&&((t||(t={}))[n]=e[n]);return t},cn=(e,t)=>{const n={};for(const o in e)l(o)&&o.slice(9)in t||(n[o]=e[o]);return n};function un(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const a=o[r];if(t[a]!==e[a]&&!tn(n,a))return!0}return!1}const dn={};function pn(e,t,n){return hn(e,t,n)}function hn(e,t,{immediate:o,deep:a,flush:i,onTrack:s,onTrigger:l}=n){var c;const d=Q()===(null==(c=_r)?void 0:c.scope)?_r:null;let p,v,f=!1,g=!1;if(wt(e)?(p=()=>e.value,f=ht(e)):dt(e)?(p=()=>e,a=!0):h(e)?(g=!0,f=e.some((e=>dt(e)||ht(e))),p=()=>e.map((e=>wt(e)?e.value:dt(e)?mn(e):m(e)?Pt(e,d,2):void 0))):p=m(e)?t?()=>Pt(e,d,2):()=>{if(!d||!d.isUnmounted)return v&&v(),jt(e,d,3,[y])}:r,t&&a){const e=p;p=()=>mn(e())}let b,y=e=>{v=x.onStop=()=>{Pt(e,d,4)}};if(Tr){if(y=r,t?o&&jt(t,d,3,[p(),g?[]:void 0,y]):p(),"sync"!==i)return r;{const e=Dr();b=e.__watcherHandles||(e.__watcherHandles=[])}}let k=g?new Array(e.length).fill(dn):dn;const w=()=>{if(x.active)if(t){const e=x.run();(a||f||(g?e.some(((e,t)=>j(e,k[t]))):j(e,k)))&&(v&&v(),jt(t,d,3,[e,k===dn?void 0:g&&k[0]===dn?[]:k,y]),k=e)}else x.run()};let _;w.allowRecurse=!!t,"sync"===i?_=w:"post"===i?_=()=>Bo(w,d&&d.suspense):(w.pre=!0,d&&(w.id=d.uid),_=()=>Wt(w));const x=new ue(p,_);t?o?w():k=x.run():"post"===i?Bo(x.run.bind(x),d&&d.suspense):x.run();const C=()=>{x.stop(),d&&d.scope&&u(d.scope.effects,x)};return b&&b.push(C),C}function vn(e,t,n){const o=this.proxy,r=g(e)?e.includes(".")?fn(o,e):()=>o[e]:e.bind(o,o);let a;m(t)?a=t:(a=t.handler,n=t);const i=_r;Ir(this);const s=hn(r,a.bind(o),n);return i?Ir(i):Nr(),s}function fn(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function mn(e,t){if(!y(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),wt(e))mn(e.value,t);else if(h(e))for(let n=0;n<e.length;n++)mn(e[n],t);else if(f(e)||v(e))e.forEach((e=>{mn(e,t)}));else if(C(e))for(const n in e)mn(e[n],t);return e}function gn(e,t){const o=nn;if(null===o)return e;const r=jr(o)||o.proxy,a=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,o,s,l=n]=t[i];e&&(m(e)&&(e={mounted:e,updated:e}),e.deep&&mn(o),a.push({dir:e,instance:r,value:o,oldValue:void 0,arg:s,modifiers:l}))}return e}function bn(e,t,n,o){const r=e.dirs,a=t&&t.dirs;for(let i=0;i<r.length;i++){const s=r[i];a&&(s.oldValue=a[i].value);let l=s.dir[o];l&&(ve(),jt(l,n,8,[e.el,s,e,t]),fe())}}function yn(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Un((()=>{e.isMounted=!0})),Hn((()=>{e.isUnmounting=!0})),e}const kn=[Function,Array],wn={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:kn,onEnter:kn,onAfterEnter:kn,onEnterCancelled:kn,onBeforeLeave:kn,onLeave:kn,onAfterLeave:kn,onLeaveCancelled:kn,onBeforeAppear:kn,onAppear:kn,onAfterAppear:kn,onAppearCancelled:kn},_n={name:"BaseTransition",props:wn,setup(e,{slots:t}){const n=xr(),o=yn();let r;return()=>{const a=t.default&&Nn(t.default(),!0);if(!a||!a.length)return;let i=a[0];if(a.length>1)for(const e of a)if(e.type!==Xo){i=e;break}const s=ft(e),{mode:l}=s;if(o.isLeaving)return En(i);const c=Sn(i);if(!c)return En(i);const u=Cn(c,s,o,n);In(c,u);const d=n.subTree,p=d&&Sn(d);let h=!1;const{getTransitionKey:v}=c.type;if(v){const e=v();void 0===r?r=e:e!==r&&(r=e,h=!0)}if(p&&p.type!==Xo&&(!ir(c,p)||h)){const e=Cn(p,s,o,n);if(In(p,e),"out-in"===l)return o.isLeaving=!0,e.afterLeave=()=>{o.isLeaving=!1,!1!==n.update.active&&n.update()},En(i);"in-out"===l&&c.type!==Xo&&(e.delayLeave=(e,t,n)=>{xn(o,p)[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return i}}};function xn(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Cn(e,t,n,o){const{appear:r,mode:a,persisted:i=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:p,onAfterLeave:v,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:b,onAppearCancelled:y}=t,k=String(e.key),w=xn(n,e),_=(e,t)=>{e&&jt(e,o,9,t)},x=(e,t)=>{const n=t[1];_(e,t),h(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:a,persisted:i,beforeEnter(t){let o=s;if(!n.isMounted){if(!r)return;o=m||s}t._leaveCb&&t._leaveCb(!0);const a=w[k];a&&ir(e,a)&&a.el._leaveCb&&a.el._leaveCb(),_(o,[t])},enter(e){let t=l,o=c,a=u;if(!n.isMounted){if(!r)return;t=g||l,o=b||c,a=y||u}let i=!1;const s=e._enterCb=t=>{i||(i=!0,_(t?a:o,[e]),C.delayedLeave&&C.delayedLeave(),e._enterCb=void 0)};t?x(t,[e,s]):s()},leave(t,o){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return o();_(d,[t]);let a=!1;const i=t._leaveCb=n=>{a||(a=!0,o(),_(n?f:v,[t]),t._leaveCb=void 0,w[r]===e&&delete w[r])};w[r]=e,p?x(p,[t,i]):i()},clone:e=>Cn(e,t,n,o)};return C}function En(e){if(Tn(e))return(e=pr(e)).children=null,e}function Sn(e){return Tn(e)?e.children?e.children[0]:void 0:e}function In(e,t){6&e.shapeFlag&&e.component?In(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Nn(e,t=!1,n){let o=[],r=0;for(let a=0;a<e.length;a++){let i=e[a];const s=null==n?i.key:String(n)+String(null!=i.key?i.key:a);i.type===qo?(128&i.patchFlag&&r++,o=o.concat(Nn(i.children,t,s))):(t||i.type!==Xo)&&o.push(null!=s?pr(i,{key:s}):i)}if(r>1)for(let a=0;a<o.length;a++)o[a].patchFlag=-2;return o}function On(e,t){return m(e)?(()=>c({name:e.name},t,{setup:e}))():e}const Mn=e=>!!e.type.__asyncLoader,Tn=e=>e.type.__isKeepAlive;function An(e,t){jn(e,"a",t)}function Pn(e,t){jn(e,"da",t)}function jn(e,t,n=_r){const o=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if($n(t,o,n),n){let e=n.parent;for(;e&&e.parent;)Tn(e.parent.vnode)&&Rn(o,t,n,e),e=e.parent}}function Rn(e,t,n,o){const r=$n(t,e,o,!0);Bn((()=>{u(o[t],r)}),n)}function $n(e,t,n=_r,o=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;ve(),Ir(n);const r=jt(t,n,e,o);return Nr(),fe(),r});return o?r.unshift(a):r.push(a),a}}const Dn=e=>(t,n=_r)=>(!Tr||"sp"===e)&&$n(e,((...e)=>t(...e)),n),Ln=Dn("bm"),Un=Dn("m"),Vn=Dn("bu"),Fn=Dn("u"),Hn=Dn("bum"),Bn=Dn("um"),Gn=Dn("sp"),zn=Dn("rtg"),Wn=Dn("rtc");function qn(e,t=_r){$n("ec",e,t)}const Kn="components";function Xn(e,t){return Zn(Kn,e,!0,t)||e}const Yn=Symbol.for("v-ndc");function Jn(e){return g(e)?Zn(Kn,e,!1)||e:e||Yn}function Zn(e,t,n=!0,o=!1){const r=nn||_r;if(r){const n=r.type;if(e===Kn){const e=function(e,t=!0){return m(e)?e.displayName||e.name:e.name||t&&e.__name}(n,!1);if(e&&(e===t||e===O(t)||e===A(O(t))))return n}const a=Qn(r[e]||n[e],t)||Qn(r.appContext[e],t);return!a&&o?n:a}}function Qn(e,t){return e&&(e[t]||e[O(t)]||e[A(O(t))])}function eo(e,t,n,o){let r;const a=n&&n[o];if(h(e)||g(e)){r=new Array(e.length);for(let n=0,o=e.length;n<o;n++)r[n]=t(e[n],n,void 0,a&&a[n])}else if("number"==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,a&&a[n])}else if(y(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,a&&a[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let o=0,i=n.length;o<i;o++){const i=n[o];r[o]=t(e[i],i,o,a&&a[o])}}else r=[];return n&&(n[o]=r),r}function to(e,t,n={},o,r){if(nn.isCE||nn.parent&&Mn(nn.parent)&&nn.parent.isCE)return"default"!==t&&(n.name=t),dr("slot",n,o&&o());let a=e[t];a&&a._c&&(a._d=!1),Qo();const i=a&&no(a(n)),s=rr(qo,{key:n.key||i&&i.key||`_${t}`},i||(o?o():[]),i&&1===e._?64:-2);return!r&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function no(e){return e.some((e=>!ar(e)||e.type!==Xo&&!(e.type===qo&&!no(e.children))))?e:null}const oo=e=>e?Or(e)?jr(e)||e.proxy:oo(e.parent):null,ro=c(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>oo(e.parent),$root:e=>oo(e.root),$emit:e=>e.emit,$options:e=>ho(e),$forceUpdate:e=>e.f||(e.f=()=>Wt(e.update)),$nextTick:e=>e.n||(e.n=zt.bind(e.proxy)),$watch:e=>vn.bind(e)}),ao=(e,t)=>e!==n&&!e.__isScriptSetup&&p(e,t),io={get({_:e},t){const{ctx:o,setupState:r,data:a,props:i,accessCache:s,type:l,appContext:c}=e;let u;if("$"!==t[0]){const l=s[t];if(void 0!==l)switch(l){case 1:return r[t];case 2:return a[t];case 4:return o[t];case 3:return i[t]}else{if(ao(r,t))return s[t]=1,r[t];if(a!==n&&p(a,t))return s[t]=2,a[t];if((u=e.propsOptions[0])&&p(u,t))return s[t]=3,i[t];if(o!==n&&p(o,t))return s[t]=4,o[t];lo&&(s[t]=0)}}const d=ro[t];let h,v;return d?("$attrs"===t&&me(e,0,t),d(e)):(h=l.__cssModules)&&(h=h[t])?h:o!==n&&p(o,t)?(s[t]=4,o[t]):(v=c.config.globalProperties,p(v,t)?v[t]:void 0)},set({_:e},t,o){const{data:r,setupState:a,ctx:i}=e;return ao(a,t)?(a[t]=o,!0):r!==n&&p(r,t)?(r[t]=o,!0):!(p(e.props,t)||"$"===t[0]&&t.slice(1)in e||(i[t]=o,0))},has({_:{data:e,setupState:t,accessCache:o,ctx:r,appContext:a,propsOptions:i}},s){let l;return!!o[s]||e!==n&&p(e,s)||ao(t,s)||(l=i[0])&&p(l,s)||p(r,s)||p(ro,s)||p(a.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:p(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function so(e){return h(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let lo=!0;function co(e){const t=ho(e),n=e.proxy,o=e.ctx;lo=!1,t.beforeCreate&&uo(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:s,watch:l,provide:c,inject:u,created:d,beforeMount:p,mounted:v,beforeUpdate:f,updated:g,activated:b,deactivated:k,beforeDestroy:w,beforeUnmount:_,destroyed:x,unmounted:C,render:E,renderTracked:S,renderTriggered:I,errorCaptured:N,serverPrefetch:O,expose:M,inheritAttrs:T,components:A,directives:P,filters:j}=t;if(u&&function(e,t,n=r){h(e)&&(e=go(e));for(const o in e){const n=e[o];let r;r=y(n)?"default"in n?So(n.from||o,n.default,!0):So(n.from||o):So(n),wt(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[o]=r}}(u,o,null),s)for(const r in s){const e=s[r];m(e)&&(o[r]=e.bind(n))}if(a){const t=a.call(n,n);y(t)&&(e.data=lt(t))}if(lo=!0,i)for(const h in i){const e=i[h],t=m(e)?e.bind(n,n):m(e.get)?e.get.bind(n,n):r,a=!m(e)&&m(e.set)?e.set.bind(n):r,s=Rr({get:t,set:a});Object.defineProperty(o,h,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e})}if(l)for(const r in l)po(l[r],o,n,r);if(c){const e=m(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{Eo(t,e[t])}))}function R(e,t){h(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&uo(d,e,"c"),R(Ln,p),R(Un,v),R(Vn,f),R(Fn,g),R(An,b),R(Pn,k),R(qn,N),R(Wn,S),R(zn,I),R(Hn,_),R(Bn,C),R(Gn,O),h(M))if(M.length){const t=e.exposed||(e.exposed={});M.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});E&&e.render===r&&(e.render=E),null!=T&&(e.inheritAttrs=T),A&&(e.components=A),P&&(e.directives=P)}function uo(e,t,n){jt(h(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function po(e,t,n,o){const r=o.includes(".")?fn(n,o):()=>n[o];if(g(e)){const n=t[e];m(n)&&pn(r,n)}else if(m(e))pn(r,e.bind(n));else if(y(e))if(h(e))e.forEach((e=>po(e,t,n,o)));else{const o=m(e.handler)?e.handler.bind(n):t[e.handler];m(o)&&pn(r,o,e)}}function ho(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:i}}=e.appContext,s=a.get(t);let l;return s?l=s:r.length||n||o?(l={},r.length&&r.forEach((e=>vo(l,e,i,!0))),vo(l,t,i)):l=t,y(t)&&a.set(t,l),l}function vo(e,t,n,o=!1){const{mixins:r,extends:a}=t;a&&vo(e,a,n,!0),r&&r.forEach((t=>vo(e,t,n,!0)));for(const i in t)if(o&&"expose"===i);else{const o=fo[i]||n&&n[i];e[i]=o?o(e[i],t[i]):t[i]}return e}const fo={data:mo,props:ko,emits:ko,methods:yo,computed:yo,beforeCreate:bo,created:bo,beforeMount:bo,mounted:bo,beforeUpdate:bo,updated:bo,beforeDestroy:bo,beforeUnmount:bo,destroyed:bo,unmounted:bo,activated:bo,deactivated:bo,errorCaptured:bo,serverPrefetch:bo,components:yo,directives:yo,watch:function(e,t){if(!e)return t;if(!t)return e;const n=c(Object.create(null),e);for(const o in t)n[o]=bo(e[o],t[o]);return n},provide:mo,inject:function(e,t){return yo(go(e),go(t))}};function mo(e,t){return t?e?function(){return c(m(e)?e.call(this,this):e,m(t)?t.call(this,this):t)}:t:e}function go(e){if(h(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function bo(e,t){return e?[...new Set([].concat(e,t))]:t}function yo(e,t){return e?c(Object.create(null),e,t):t}function ko(e,t){return e?h(e)&&h(t)?[...new Set([...e,...t])]:c(Object.create(null),so(e),so(null!=t?t:{})):t}function wo(){return{app:null,config:{isNativeTag:a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _o=0;function xo(e,t){return function(n,o=null){m(n)||(n=c({},n)),null==o||y(o)||(o=null);const r=wo(),a=new Set;let i=!1;const s=r.app={_uid:_o++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:Lr,get config(){return r.config},set config(e){},use:(e,...t)=>(a.has(e)||(e&&m(e.install)?(a.add(e),e.install(s,...t)):m(e)&&(a.add(e),e(s,...t))),s),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),s),component:(e,t)=>t?(r.components[e]=t,s):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,s):r.directives[e],mount(a,l,c){if(!i){const u=dr(n,o);return u.appContext=r,l&&t?t(u,a):e(u,a,c),i=!0,s._container=a,a.__vue_app__=s,jr(u.component)||u.component.proxy}},unmount(){i&&(e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,s),runWithContext(e){Co=s;try{return e()}finally{Co=null}}};return s}}let Co=null;function Eo(e,t){if(_r){let n=_r.provides;const o=_r.parent&&_r.parent.provides;o===n&&(n=_r.provides=Object.create(o)),n[e]=t}}function So(e,t,n=!1){const o=_r||nn;if(o||Co){const r=o?null==o.parent?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:Co._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&m(t)?t.call(o&&o.proxy):t}}function Io(e,t,n,o=!1){const r={},a={};$(a,sr,1),e.propsDefaults=Object.create(null),No(e,t,r,a);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=o?r:ut(r,!1,je,tt,at):e.type.props?e.props=r:e.props=a,e.attrs=a}function No(e,t,o,r){const[a,i]=e.propsOptions;let s,l=!1;if(t)for(let n in t){if(S(n))continue;const c=t[n];let u;a&&p(a,u=O(n))?i&&i.includes(u)?(s||(s={}))[u]=c:o[u]=c:tn(e.emitsOptions,n)||n in r&&c===r[n]||(r[n]=c,l=!0)}if(i){const t=ft(o),r=s||n;for(let n=0;n<i.length;n++){const s=i[n];o[s]=Oo(a,t,s,r[s],e,!p(r,s))}}return l}function Oo(e,t,n,o,r,a){const i=e[n];if(null!=i){const e=p(i,"default");if(e&&void 0===o){const e=i.default;if(i.type!==Function&&!i.skipFactory&&m(e)){const{propsDefaults:a}=r;n in a?o=a[n]:(Ir(r),o=a[n]=e.call(null,t),Nr())}else o=e}i[0]&&(a&&!e?o=!1:!i[1]||""!==o&&o!==T(n)||(o=!0))}return o}function Mo(e,t,r=!1){const a=t.propsCache,i=a.get(e);if(i)return i;const s=e.props,l={},u=[];let d=!1;if(!m(e)){const n=e=>{d=!0;const[n,o]=Mo(e,t,!0);c(l,n),o&&u.push(...o)};!r&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}if(!s&&!d)return y(e)&&a.set(e,o),o;if(h(s))for(let o=0;o<s.length;o++){const e=O(s[o]);To(e)&&(l[e]=n)}else if(s)for(const n in s){const e=O(n);if(To(e)){const t=s[n],o=l[e]=h(t)||m(t)?{type:t}:c({},t);if(o){const t=jo(Boolean,o.type),n=jo(String,o.type);o[0]=t>-1,o[1]=n<0||t<n,(t>-1||p(o,"default"))&&u.push(e)}}}const v=[l,u];return y(e)&&a.set(e,v),v}function To(e){return"$"!==e[0]}function Ao(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function Po(e,t){return Ao(e)===Ao(t)}function jo(e,t){return h(t)?t.findIndex((t=>Po(t,e))):m(t)&&Po(t,e)?0:-1}const Ro=e=>"_"===e[0]||"$stable"===e,$o=e=>h(e)?e.map(mr):[mr(e)],Do=(e,t,n)=>{if(t._n)return t;const o=an(((...e)=>$o(t(...e))),n);return o._c=!1,o},Lo=(e,t,n)=>{const o=e._ctx;for(const r in e){if(Ro(r))continue;const n=e[r];if(m(n))t[r]=Do(0,n,o);else if(null!=n){const e=$o(n);t[r]=()=>e}}},Uo=(e,t)=>{const n=$o(t);e.slots.default=()=>n},Vo=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ft(t),$(t,"_",n)):Lo(t,e.slots={})}else e.slots={},t&&Uo(e,t);$(e.slots,sr,1)},Fo=(e,t,o)=>{const{vnode:r,slots:a}=e;let i=!0,s=n;if(32&r.shapeFlag){const e=t._;e?o&&1===e?i=!1:(c(a,t),o||1!==e||delete a._):(i=!t.$stable,Lo(t,a)),s=t}else t&&(Uo(e,t),s={default:1});if(i)for(const n in a)Ro(n)||n in s||delete a[n]};function Ho(e,t,o,r,a=!1){if(h(e))return void e.forEach(((e,n)=>Ho(e,t&&(h(t)?t[n]:t),o,r,a)));if(Mn(r)&&!a)return;const i=4&r.shapeFlag?jr(r.component)||r.component.proxy:r.el,s=a?null:i,{i:l,r:c}=e,d=t&&t.r,v=l.refs===n?l.refs={}:l.refs,f=l.setupState;if(null!=d&&d!==c&&(g(d)?(v[d]=null,p(f,d)&&(f[d]=null)):wt(d)&&(d.value=null)),m(c))Pt(c,l,12,[s,v]);else{const t=g(c),n=wt(c);if(t||n){const r=()=>{if(e.f){const n=t?p(f,c)?f[c]:v[c]:c.value;a?h(n)&&u(n,i):h(n)?n.includes(i)||n.push(i):t?(v[c]=[i],p(f,c)&&(f[c]=v[c])):(c.value=[i],e.k&&(v[e.k]=c.value))}else t?(v[c]=s,p(f,c)&&(f[c]=s)):n&&(c.value=s,e.k&&(v[e.k]=s))};s?(r.id=-1,Bo(r,o)):r()}}}const Bo=function(e,t){var n;t&&t.pendingBranch?h(e)?t.effects.push(...e):t.effects.push(e):(h(n=e)?Vt.push(...n):Ft&&Ft.includes(n,n.allowRecurse?Ht+1:Ht)||Vt.push(n),qt())};function Go(e){return function(e,t){V().__VUE__=!0;const{insert:a,remove:i,patchProp:s,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:v,nextSibling:f,setScopeId:m=r,insertStaticContent:g}=e,b=(e,t,n,o=null,r=null,a=null,i=!1,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!ir(e,t)&&(o=Q(e),q(e,r,a,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case Ko:y(e,t,n,o);break;case Xo:w(e,t,n,o);break;case Yo:null==e&&_(t,n,o,i);break;case qo:$(e,t,n,o,r,a,i,s,l);break;default:1&d?E(e,t,n,o,r,a,i,s,l):6&d?D(e,t,n,o,r,a,i,s,l):(64&d||128&d)&&c.process(e,t,n,o,r,a,i,s,l,te)}null!=u&&r&&Ho(u,e&&e.ref,a,t||e,!t)},y=(e,t,n,o)=>{if(null==e)a(t.el=c(t.children),n,o);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},w=(e,t,n,o)=>{null==e?a(t.el=u(t.children||""),n,o):t.el=e.el},_=(e,t,n,o)=>{[e.el,e.anchor]=g(e.children,t,n,o,e.el,e.anchor)},x=({el:e,anchor:t},n,o)=>{let r;for(;e&&e!==t;)r=f(e),a(e,n,o),e=r;a(t,n,o)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=f(e),i(e),e=n;i(t)},E=(e,t,n,o,r,a,i,s,l)=>{i=i||"svg"===t.type,null==e?I(t,n,o,r,a,i,s,l):A(e,t,r,a,i,s,l)},I=(e,t,n,o,r,i,c,u)=>{let d,p;const{type:v,props:f,shapeFlag:m,transition:g,dirs:b}=e;if(d=e.el=l(e.type,i,f&&f.is,f),8&m?h(d,e.children):16&m&&M(e.children,d,null,o,r,i&&"foreignObject"!==v,c,u),b&&bn(e,null,o,"created"),N(d,e,e.scopeId,c,o),f){for(const t in f)"value"===t||S(t)||s(d,t,null,f[t],i,e.children,o,r,J);"value"in f&&s(d,"value",null,f.value),(p=f.onVnodeBeforeMount)&&yr(p,o,e)}b&&bn(e,null,o,"beforeMount");const y=(!r||r&&!r.pendingBranch)&&g&&!g.persisted;y&&g.beforeEnter(d),a(d,t,n),((p=f&&f.onVnodeMounted)||y||b)&&Bo((()=>{p&&yr(p,o,e),y&&g.enter(d),b&&bn(e,null,o,"mounted")}),r)},N=(e,t,n,o,r)=>{if(n&&m(e,n),o)for(let a=0;a<o.length;a++)m(e,o[a]);if(r&&t===r.subTree){const t=r.vnode;N(e,t,t.scopeId,t.slotScopeIds,r.parent)}},M=(e,t,n,o,r,a,i,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?gr(e[c]):mr(e[c]);b(null,l,t,n,o,r,a,i,s)}},A=(e,t,o,r,a,i,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const v=e.props||n,f=t.props||n;let m;o&&zo(o,!1),(m=f.onVnodeBeforeUpdate)&&yr(m,o,t,e),p&&bn(t,e,o,"beforeUpdate"),o&&zo(o,!0);const g=a&&"foreignObject"!==t.type;if(d?P(e.dynamicChildren,d,c,o,r,g,i):l||B(e,t,c,null,o,r,g,i,!1),u>0){if(16&u)j(c,t,v,f,o,r,a);else if(2&u&&v.class!==f.class&&s(c,"class",null,f.class,a),4&u&&s(c,"style",v.style,f.style,a),8&u){const n=t.dynamicProps;for(let t=0;t<n.length;t++){const i=n[t],l=v[i],u=f[i];u===l&&"value"!==i||s(c,i,l,u,a,e.children,o,r,J)}}1&u&&e.children!==t.children&&h(c,t.children)}else l||null!=d||j(c,t,v,f,o,r,a);((m=f.onVnodeUpdated)||p)&&Bo((()=>{m&&yr(m,o,t,e),p&&bn(t,e,o,"updated")}),r)},P=(e,t,n,o,r,a,i)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],u=l.el&&(l.type===qo||!ir(l,c)||70&l.shapeFlag)?v(l.el):n;b(l,c,u,null,o,r,a,i,!0)}},j=(e,t,o,r,a,i,l)=>{if(o!==r){if(o!==n)for(const n in o)S(n)||n in r||s(e,n,o[n],null,l,t.children,a,i,J);for(const n in r){if(S(n))continue;const c=r[n],u=o[n];c!==u&&"value"!==n&&s(e,n,u,c,l,t.children,a,i,J)}"value"in r&&s(e,"value",o.value,r.value)}},$=(e,t,n,o,r,i,s,l,u)=>{const d=t.el=e?e.el:c(""),p=t.anchor=e?e.anchor:c("");let{patchFlag:h,dynamicChildren:v,slotScopeIds:f}=t;f&&(l=l?l.concat(f):f),null==e?(a(d,n,o),a(p,n,o),M(t.children,n,p,r,i,s,l,u)):h>0&&64&h&&v&&e.dynamicChildren?(P(e.dynamicChildren,v,n,r,i,s,l),(null!=t.key||r&&t===r.subTree)&&Wo(e,t,!0)):B(e,t,n,p,r,i,s,l,u)},D=(e,t,n,o,r,a,i,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?r.ctx.activate(t,n,o,i,l):L(t,n,o,r,a,i,l):U(e,t,l)},L=(e,t,o,r,a,i,s)=>{const l=e.component=function(e,t,o){const r=e.type,a=(t?t.appContext:e.appContext)||kr,i={uid:wr++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mo(r,a),emitsOptions:en(r,a),emit:null,emitted:null,propsDefaults:n,inheritAttrs:r.inheritAttrs,ctx:n,data:n,props:n,attrs:n,slots:n,refs:n,setupState:n,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Qt.bind(null,i),e.ce&&e.ce(i),i}(e,r,a);if(Tn(e)&&(l.ctx.renderer=te),function(e,t=!1){Tr=t;const{props:n,children:o}=e.vnode,r=Or(e);Io(e,n,r,t),Vo(e,o);r&&function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=mt(new Proxy(e.ctx,io));const{setup:o}=n;if(o){const n=e.setupContext=o.length>1?function(e){const t=t=>{e.exposed=t||{}};return{get attrs(){return function(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get:(t,n)=>(me(e,0,"$attrs"),t[n])}))}(e)},slots:e.slots,emit:e.emit,expose:t}}(e):null;Ir(e),ve();const r=Pt(o,e,0,[e.props,n]);if(fe(),Nr(),k(r)){if(r.then(Nr,Nr),t)return r.then((n=>{Ar(e,n,t)})).catch((t=>{Rt(t,e,0)}));e.asyncDep=r}else Ar(e,r,t)}else Pr(e,t)}(e,t);Tr=!1}(l),l.asyncDep){if(a&&a.registerDep(l,F),!e.el){const e=l.subTree=dr(Xo);w(null,e,t,o)}}else F(l,e,t,o,a,i,s)},U=(e,t,n)=>{const o=t.component=e.component;if(function(e,t,n){const{props:o,children:r,component:a}=e,{props:i,children:s,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!s||s&&s.$stable)||o!==i&&(o?!i||un(o,i,c):!!i);if(1024&l)return!0;if(16&l)return o?un(o,i,c):!!i;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(i[n]!==o[n]&&!tn(c,n))return!0}}return!1}(e,t,n)){if(o.asyncDep&&!o.asyncResolved)return void H(o,t,n);o.next=t,function(e){const t=Lt.indexOf(e);t>Ut&&Lt.splice(t,1)}(o.update),o.update()}else t.el=e.el,o.vnode=t},F=(e,t,n,o,r,a,i)=>{const s=()=>{if(e.isMounted){let t,{next:n,bu:o,u:s,parent:l,vnode:c}=e,u=n;zo(e,!1),n?(n.el=c.el,H(e,n,i)):n=c,o&&R(o),(t=n.props&&n.props.onVnodeBeforeUpdate)&&yr(t,l,n,c),zo(e,!0);const d=sn(e),p=e.subTree;e.subTree=d,b(p,d,v(p.el),Q(p),e,r,a),n.el=d.el,null===u&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,d.el),s&&Bo(s,r),(t=n.props&&n.props.onVnodeUpdated)&&Bo((()=>yr(t,l,n,c)),r)}else{let i;const{el:s,props:l}=t,{bm:c,m:u,parent:d}=e,p=Mn(t);if(zo(e,!1),c&&R(c),!p&&(i=l&&l.onVnodeBeforeMount)&&yr(i,d,t),zo(e,!0),s&&oe){const n=()=>{e.subTree=sn(e),oe(s,e.subTree,e,r,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const i=e.subTree=sn(e);b(null,i,n,o,e,r,a),t.el=i.el}if(u&&Bo(u,r),!p&&(i=l&&l.onVnodeMounted)){const e=t;Bo((()=>yr(i,d,e)),r)}(256&t.shapeFlag||d&&Mn(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&Bo(e.a,r),e.isMounted=!0,t=n=o=null}},l=e.effect=new ue(s,(()=>Wt(c)),e.scope),c=e.update=()=>l.run();c.id=e.uid,zo(e,!0),c()},H=(e,t,n)=>{t.component=e;const o=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,o){const{props:r,attrs:a,vnode:{patchFlag:i}}=e,s=ft(r),[l]=e.propsOptions;let c=!1;if(!(o||i>0)||16&i){let o;No(e,t,r,a)&&(c=!0);for(const a in s)t&&(p(t,a)||(o=T(a))!==a&&p(t,o))||(l?!n||void 0===n[a]&&void 0===n[o]||(r[a]=Oo(l,s,a,void 0,e,!0)):delete r[a]);if(a!==s)for(const e in a)t&&p(t,e)||(delete a[e],c=!0)}else if(8&i){const n=e.vnode.dynamicProps;for(let o=0;o<n.length;o++){let i=n[o];if(tn(e.emitsOptions,i))continue;const u=t[i];if(l)if(p(a,i))u!==a[i]&&(a[i]=u,c=!0);else{const t=O(i);r[t]=Oo(l,s,t,u,e,!1)}else u!==a[i]&&(a[i]=u,c=!0)}}c&&be(e,"set","$attrs")}(e,t.props,o,n),Fo(e,t.children,n),ve(),Kt(),fe()},B=(e,t,n,o,r,a,i,s,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:v}=t;if(p>0){if(128&p)return void z(c,d,n,o,r,a,i,s,l);if(256&p)return void G(c,d,n,o,r,a,i,s,l)}8&v?(16&u&&J(c,r,a),d!==c&&h(n,d)):16&u?16&v?z(c,d,n,o,r,a,i,s,l):J(c,r,a,!0):(8&u&&h(n,""),16&v&&M(d,n,o,r,a,i,s,l))},G=(e,t,n,r,a,i,s,l,c)=>{t=t||o;const u=(e=e||o).length,d=t.length,p=Math.min(u,d);let h;for(h=0;h<p;h++){const o=t[h]=c?gr(t[h]):mr(t[h]);b(e[h],o,n,null,a,i,s,l,c)}u>d?J(e,a,i,!0,!1,p):M(t,n,r,a,i,s,l,c,p)},z=(e,t,n,r,a,i,s,l,c)=>{let u=0;const d=t.length;let p=e.length-1,h=d-1;for(;u<=p&&u<=h;){const o=e[u],r=t[u]=c?gr(t[u]):mr(t[u]);if(!ir(o,r))break;b(o,r,n,null,a,i,s,l,c),u++}for(;u<=p&&u<=h;){const o=e[p],r=t[h]=c?gr(t[h]):mr(t[h]);if(!ir(o,r))break;b(o,r,n,null,a,i,s,l,c),p--,h--}if(u>p){if(u<=h){const e=h+1,o=e<d?t[e].el:r;for(;u<=h;)b(null,t[u]=c?gr(t[u]):mr(t[u]),n,o,a,i,s,l,c),u++}}else if(u>h)for(;u<=p;)q(e[u],a,i,!0),u++;else{const v=u,f=u,m=new Map;for(u=f;u<=h;u++){const e=t[u]=c?gr(t[u]):mr(t[u]);null!=e.key&&m.set(e.key,u)}let g,y=0;const k=h-f+1;let w=!1,_=0;const x=new Array(k);for(u=0;u<k;u++)x[u]=0;for(u=v;u<=p;u++){const o=e[u];if(y>=k){q(o,a,i,!0);continue}let r;if(null!=o.key)r=m.get(o.key);else for(g=f;g<=h;g++)if(0===x[g-f]&&ir(o,t[g])){r=g;break}void 0===r?q(o,a,i,!0):(x[r-f]=u+1,r>=_?_=r:w=!0,b(o,t[r],n,null,a,i,s,l,c),y++)}const C=w?function(e){const t=e.slice(),n=[0];let o,r,a,i,s;const l=e.length;for(o=0;o<l;o++){const l=e[o];if(0!==l){if(r=n[n.length-1],e[r]<l){t[o]=r,n.push(o);continue}for(a=0,i=n.length-1;a<i;)s=a+i>>1,e[n[s]]<l?a=s+1:i=s;l<e[n[a]]&&(a>0&&(t[o]=n[a-1]),n[a]=o)}}for(a=n.length,i=n[a-1];a-- >0;)n[a]=i,i=t[i];return n}(x):o;for(g=C.length-1,u=k-1;u>=0;u--){const e=f+u,o=t[e],p=e+1<d?t[e+1].el:r;0===x[u]?b(null,o,n,p,a,i,s,l,c):w&&(g<0||u!==C[g]?W(o,n,p,2):g--)}}},W=(e,t,n,o,r=null)=>{const{el:i,type:s,transition:l,children:c,shapeFlag:u}=e;if(6&u)W(e.component.subTree,t,n,o);else if(128&u)e.suspense.move(t,n,o);else if(64&u)s.move(e,t,n,te);else if(s!==qo)if(s!==Yo)if(2!==o&&1&u&&l)if(0===o)l.beforeEnter(i),a(i,t,n),Bo((()=>l.enter(i)),r);else{const{leave:e,delayLeave:o,afterLeave:r}=l,s=()=>a(i,t,n),c=()=>{e(i,(()=>{s(),r&&r()}))};o?o(i,s,c):c()}else a(i,t,n);else x(e,t,n);else{a(i,t,n);for(let e=0;e<c.length;e++)W(c[e],t,n,o);a(e.anchor,t,n)}},q=(e,t,n,o=!1,r=!1)=>{const{type:a,props:i,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:p}=e;if(null!=s&&Ho(s,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const h=1&u&&p,v=!Mn(e);let f;if(v&&(f=i&&i.onVnodeBeforeUnmount)&&yr(f,t,e),6&u)Y(e.component,n,o);else{if(128&u)return void e.suspense.unmount(n,o);h&&bn(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,r,te,o):c&&(a!==qo||d>0&&64&d)?J(c,t,n,!1,!0):(a===qo&&384&d||!r&&16&u)&&J(l,t,n),o&&K(e)}(v&&(f=i&&i.onVnodeUnmounted)||h)&&Bo((()=>{f&&yr(f,t,e),h&&bn(e,null,t,"unmounted")}),n)},K=e=>{const{type:t,el:n,anchor:o,transition:r}=e;if(t===qo)return void X(n,o);if(t===Yo)return void C(e);const a=()=>{i(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:o}=r,i=()=>t(n,a);o?o(e.el,a,i):i()}else a()},X=(e,t)=>{let n;for(;e!==t;)n=f(e),i(e),e=n;i(t)},Y=(e,t,n)=>{const{bum:o,scope:r,update:a,subTree:i,um:s}=e;o&&R(o),r.stop(),a&&(a.active=!1,q(i,e,t,n)),s&&Bo(s,t),Bo((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,o=!1,r=!1,a=0)=>{for(let i=a;i<e.length;i++)q(e[i],t,n,o,r)},Q=e=>6&e.shapeFlag?Q(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),ee=(e,t,n)=>{null==e?t._vnode&&q(t._vnode,null,null,!0):b(t._vnode||null,e,t,null,null,null,n),Kt(),Xt(),t._vnode=e},te={p:b,um:q,m:W,r:K,mt:L,mc:M,pc:B,pbc:P,n:Q,o:e};let ne,oe;return t&&([ne,oe]=t(te)),{render:ee,hydrate:ne,createApp:xo(ee,ne)}}(e)}function zo({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Wo(e,t,n=!1){const o=e.children,r=t.children;if(h(o)&&h(r))for(let a=0;a<o.length;a++){const e=o[a];let t=r[a];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[a]=gr(r[a]),t.el=e.el),n||Wo(e,t)),t.type===Ko&&(t.el=e.el)}}const qo=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),Xo=Symbol.for("v-cmt"),Yo=Symbol.for("v-stc"),Jo=[];let Zo=null;function Qo(e=!1){Jo.push(Zo=e?null:[])}let er=1;function tr(e){er+=e}function nr(e){return e.dynamicChildren=er>0?Zo||o:null,Jo.pop(),Zo=Jo[Jo.length-1]||null,er>0&&Zo&&Zo.push(e),e}function or(e,t,n,o,r,a){return nr(ur(e,t,n,o,r,a,!0))}function rr(e,t,n,o,r){return nr(dr(e,t,n,o,r,!0))}function ar(e){return!!e&&!0===e.__v_isVNode}function ir(e,t){return e.type===t.type&&e.key===t.key}const sr="__vInternal",lr=({key:e})=>null!=e?e:null,cr=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?g(e)||wt(e)||m(e)?{i:nn,r:e,k:t,f:!!n}:e:null);function ur(e,t=null,n=null,o=0,r=null,a=(e===qo?0:1),i=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&lr(t),ref:t&&cr(t),scopeId:on,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:nn};return s?(br(l,n),128&a&&e.normalize(l)):n&&(l.shapeFlag|=g(n)?8:16),er>0&&!i&&Zo&&(l.patchFlag>0||6&a)&&32!==l.patchFlag&&Zo.push(l),l}const dr=function(e,t=null,n=null,o=0,r=null,a=!1){if(e&&e!==Yn||(e=Xo),ar(e)){const o=pr(e,t,!0);return n&&br(o,n),er>0&&!a&&Zo&&(6&o.shapeFlag?Zo[Zo.indexOf(e)]=o:Zo.push(o)),o.patchFlag|=-2,o}var i;if(m(i=e)&&"__vccOpts"in i&&(e=e.__vccOpts),t){t=function(e){return e?vt(e)||sr in e?c({},e):e:null}(t);let{class:e,style:n}=t;e&&!g(e)&&(t.class=W(e)),y(n)&&(vt(n)&&!h(n)&&(n=c({},n)),t.style=F(n))}const s=g(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:y(e)?4:m(e)?2:0;return ur(e,t,n,o,r,s,a,!0)};function pr(e,t,n=!1){const{props:o,ref:r,patchFlag:a,children:i}=e,l=t?function(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)if("class"===e)t.class!==o.class&&(t.class=W([t.class,o.class]));else if("style"===e)t.style=F([t.style,o.style]);else if(s(e)){const n=t[e],r=o[e];!r||n===r||h(n)&&n.includes(r)||(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=o[e])}return t}(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&lr(l),ref:t&&t.ref?n&&r?h(r)?r.concat(cr(t)):[r,cr(t)]:cr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==qo?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pr(e.ssContent),ssFallback:e.ssFallback&&pr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function hr(e=" ",t=0){return dr(Ko,null,e,t)}function vr(e,t){const n=dr(Yo,null,e);return n.staticCount=t,n}function fr(e="",t=!1){return t?(Qo(),rr(Xo,null,e)):dr(Xo,null,e)}function mr(e){return null==e||"boolean"==typeof e?dr(Xo):h(e)?dr(qo,null,e.slice()):"object"==typeof e?gr(e):dr(Ko,null,String(e))}function gr(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:pr(e)}function br(e,t){let n=0;const{shapeFlag:o}=e;if(null==t)t=null;else if(h(t))n=16;else if("object"==typeof t){if(65&o){const n=t.default;return void(n&&(n._c&&(n._d=!1),br(e,n()),n._c&&(n._d=!0)))}{n=32;const o=t._;o||sr in t?3===o&&nn&&(1===nn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=nn}}else m(t)?(t={default:t,_ctx:nn},n=32):(t=String(t),64&o?(n=16,t=[hr(t)]):n=8);e.children=t,e.shapeFlag|=n}function yr(e,t,n,o=null){jt(e,t,7,[n,o])}const kr=wo();let wr=0,_r=null;const xr=()=>_r||nn;let Cr,Er,Sr="__VUE_INSTANCE_SETTERS__";(Er=V()[Sr])||(Er=V()[Sr]=[]),Er.push((e=>_r=e)),Cr=e=>{Er.length>1?Er.forEach((t=>t(e))):Er[0](e)};const Ir=e=>{Cr(e),e.scope.on()},Nr=()=>{_r&&_r.scope.off(),Cr(null)};function Or(e){return 4&e.vnode.shapeFlag}let Mr,Tr=!1;function Ar(e,t,n){m(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:y(t)&&(e.setupState=St(t)),Pr(e,n)}function Pr(e,t,n){const o=e.type;if(!e.render){if(!t&&Mr&&!o.render){const t=o.template||ho(e).template;if(t){const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:i}=o,s=c(c({isCustomElement:n,delimiters:a},r),i);o.render=Mr(t,s)}}e.render=o.render||r}Ir(e),ve(),co(e),fe(),Nr()}function jr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(St(mt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in ro?ro[n](e):void 0,has:(e,t)=>t in e||t in ro}))}const Rr=(e,t)=>function(e,t,n=!1){let o,a;const i=m(e);return i?(o=e,a=r):(o=e.get,a=e.set),new At(o,a,i||!a,n)}(e,0,Tr),$r=Symbol.for("v-scx"),Dr=()=>So($r),Lr="3.3.4",Ur="undefined"!=typeof document?document:null,Vr=Ur&&Ur.createElement("template"),Fr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t?Ur.createElementNS("http://www.w3.org/2000/svg",e):Ur.createElement(e,n?{is:n}:void 0);return"select"===e&&o&&null!=o.multiple&&r.setAttribute("multiple",o.multiple),r},createText:e=>Ur.createTextNode(e),createComment:e=>Ur.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ur.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,a){const i=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==a&&(r=r.nextSibling););else{Vr.innerHTML=o?`<svg>${e}</svg>`:e;const r=Vr.content;if(o){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Hr=/\s*!important$/;function Br(e,t,n){if(h(n))n.forEach((n=>Br(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=function(e,t){const n=zr[t];if(n)return n;let o=O(t);if("filter"!==o&&o in e)return zr[t]=o;o=A(o);for(let r=0;r<Gr.length;r++){const n=Gr[r]+o;if(n in e)return zr[t]=n}return t}(e,t);Hr.test(n)?e.setProperty(T(o),n.replace(Hr,""),"important"):e[o]=n}}const Gr=["Webkit","Moz","ms"],zr={},Wr="http://www.w3.org/1999/xlink";function qr(e,t,n,o){e.addEventListener(t,n,o)}function Kr(e,t,n,o,r=null){const a=e._vei||(e._vei={}),i=a[t];if(o&&i)i.value=o;else{const[n,s]=function(e){let t;if(Xr.test(e)){let n;for(t={};n=e.match(Xr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):T(e.slice(2));return[n,t]}(t);if(o){const i=a[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();jt(function(e,t){if(h(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Zr(),n}(o,r);qr(e,n,i,s)}else i&&(function(e,t,n,o){e.removeEventListener(t,n,o)}(e,n,i,s),a[t]=void 0)}}const Xr=/(?:Once|Passive|Capture)$/;let Yr=0;const Jr=Promise.resolve(),Zr=()=>Yr||(Jr.then((()=>Yr=0)),Yr=Date.now()),Qr=/^on[a-z]/,ea="transition",ta="animation",na=(e,{slots:t})=>function(e,t,n){const o=arguments.length;return 2===o?y(t)&&!h(t)?ar(t)?dr(e,null,[t]):dr(e,t):dr(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):3===o&&ar(n)&&(n=[n]),dr(e,t,n))}(_n,sa(e),t);na.displayName="Transition";const oa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ra=na.props=c({},wn,oa),aa=(e,t=[])=>{h(e)?e.forEach((e=>e(...t))):e&&e(...t)},ia=e=>!!e&&(h(e)?e.some((e=>e.length>1)):e.length>1);function sa(e){const t={};for(const c in e)c in oa||(t[c]=e[c]);if(!1===e.css)return t;const{name:n="v",type:o,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:u=i,appearToClass:d=s,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(y(e))return[la(e.enter),la(e.leave)];{const t=la(e);return[t,t]}}(r),m=f&&f[0],g=f&&f[1],{onBeforeEnter:b,onEnter:k,onEnterCancelled:w,onLeave:_,onLeaveCancelled:x,onBeforeAppear:C=b,onAppear:E=k,onAppearCancelled:S=w}=t,I=(e,t,n)=>{ua(e,t?d:s),ua(e,t?u:i),n&&n()},N=(e,t)=>{e._isLeaving=!1,ua(e,p),ua(e,v),ua(e,h),t&&t()},O=e=>(t,n)=>{const r=e?E:k,i=()=>I(t,e,n);aa(r,[t,i]),da((()=>{ua(t,e?l:a),ca(t,e?d:s),ia(r)||ha(t,o,m,i)}))};return c(t,{onBeforeEnter(e){aa(b,[e]),ca(e,a),ca(e,i)},onBeforeAppear(e){aa(C,[e]),ca(e,l),ca(e,u)},onEnter:O(!1),onAppear:O(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>N(e,t);ca(e,p),ga(),ca(e,h),da((()=>{e._isLeaving&&(ua(e,p),ca(e,v),ia(_)||ha(e,o,g,n))})),aa(_,[e,n])},onEnterCancelled(e){I(e,!1),aa(w,[e])},onAppearCancelled(e){I(e,!0),aa(S,[e])},onLeaveCancelled(e){N(e),aa(x,[e])}})}function la(e){return L(e)}function ca(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function ua(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function da(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let pa=0;function ha(e,t,n,o){const r=e._endId=++pa,a=()=>{r===e._endId&&o()};if(n)return setTimeout(a,n);const{type:i,timeout:s,propCount:l}=va(e,t);if(!i)return o();const c=i+"end";let u=0;const d=()=>{e.removeEventListener(c,p),a()},p=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),s+1),e.addEventListener(c,p)}function va(e,t){const n=window.getComputedStyle(e),o=e=>(n[e]||"").split(", "),r=o(`${ea}Delay`),a=o(`${ea}Duration`),i=fa(r,a),s=o(`${ta}Delay`),l=o(`${ta}Duration`),c=fa(s,l);let u=null,d=0,p=0;return t===ea?i>0&&(u=ea,d=i,p=a.length):t===ta?c>0&&(u=ta,d=c,p=l.length):(d=Math.max(i,c),u=d>0?i>c?ea:ta:null,p=u?u===ea?a.length:l.length:0),{type:u,timeout:d,propCount:p,hasTransform:u===ea&&/\b(transform|all)(,|$)/.test(o(`${ea}Property`).toString())}}function fa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>ma(t)+ma(e[n]))))}function ma(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ga(){return document.body.offsetHeight}const ba=new WeakMap,ya=new WeakMap,ka={name:"TransitionGroup",props:c({},ra,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=xr(),o=yn();let r,a;return Fn((()=>{if(!r.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const o=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&o.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&o.classList.add(e))),o.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(o);const{hasTransform:a}=va(o);return r.removeChild(o),a}(r[0].el,n.vnode.el,t))return;r.forEach(_a),r.forEach(xa);const o=r.filter(Ca);ga(),o.forEach((e=>{const n=e.el,o=n.style;ca(n,t),o.transform=o.webkitTransform=o.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,ua(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const i=ft(e),s=sa(i);let l=i.tag||qo;r=a,a=t.default?Nn(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&In(t,Cn(t,s,o,n))}if(r)for(let e=0;e<r.length;e++){const t=r[e];In(t,Cn(t,s,o,n)),ba.set(t,t.el.getBoundingClientRect())}return dr(l,null,a)}}},wa=ka;function _a(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function xa(e){ya.set(e,e.el.getBoundingClientRect())}function Ca(e){const t=ba.get(e),n=ya.get(e),o=t.left-n.left,r=t.top-n.top;if(o||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${o}px,${r}px)`,t.transitionDuration="0s",e}}const Ea=e=>{const t=e.props["onUpdate:modelValue"]||!1;return h(t)?e=>R(t,e):t};function Sa(e){e.target.composing=!0}function Ia(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Na={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e._assign=Ea(r);const a=o||r.props&&"number"===r.props.type;qr(e,t?"change":"input",(t=>{if(t.target.composing)return;let o=e.value;n&&(o=o.trim()),a&&(o=D(o)),e._assign(o)})),n&&qr(e,"change",(()=>{e.value=e.value.trim()})),t||(qr(e,"compositionstart",Sa),qr(e,"compositionend",Ia),qr(e,"change",Ia))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:r}},a){if(e._assign=Ea(a),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(o&&e.value.trim()===t)return;if((r||"number"===e.type)&&D(e.value)===t)return}const i=null==t?"":t;e.value!==i&&(e.value=i)}},Oa=["ctrl","shift","alt","meta"],Ma={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Oa.some((n=>e[`${n}Key`]&&!t.includes(n)))},Ta=(e,t)=>(n,...o)=>{for(let e=0;e<t.length;e++){const o=Ma[t[e]];if(o&&o(n,t))return}return e(n,...o)},Aa={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pa=(e,t)=>n=>{if(!("key"in n))return;const o=T(n.key);return t.some((e=>e===o||Aa[e]===o))?e(n):void 0},ja={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Ra(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Ra(e,!0),o.enter(e)):o.leave(e,(()=>{Ra(e,!1)})):Ra(e,t))},beforeUnmount(e,{value:t}){Ra(e,t)}};function Ra(e,t){e.style.display=t?e._vod:"none"}const $a=c({patchProp:(e,t,n,o,r=!1,a,i,c,u)=>{"class"===t?function(e,t,n){const o=e._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,o,r):"style"===t?function(e,t,n){const o=e.style,r=g(n);if(n&&!r){if(t&&!g(t))for(const e in t)null==n[e]&&Br(o,e,"");for(const e in n)Br(o,e,n[e])}else{const a=o.display;r?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=a)}}(e,n,o):s(t)?l(t)||Kr(e,t,0,o,i):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,o){return o?"innerHTML"===t||"textContent"===t||!!(t in e&&Qr.test(t)&&m(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!Qr.test(t)||!g(n))&&t in e))))}(e,t,o,r))?function(e,t,n,o,r,a,i){if("innerHTML"===t||"textContent"===t)return o&&i(o,r,a),void(e[t]=null==n?"":n);const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){e._value=n;const o=null==n?"":n;return("OPTION"===s?e.getAttribute("value"):e.value)!==o&&(e.value=o),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=K(n):null==n&&"string"===o?(n="",l=!0):"number"===o&&(n=0,l=!0)}try{e[t]=n}catch(c){}l&&e.removeAttribute(t)}(e,t,o,a,i,c,u):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),function(e,t,n,o,r){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Wr,t.slice(6,t.length)):e.setAttributeNS(Wr,t,n);else{const o=q(t);null==n||o&&!K(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}(e,t,o,r))}},Fr);let Da,La;const Ua=new Uint8Array(16);function Va(){if(!La&&(La="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!La))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return La(Ua)}const Fa=[];for(let Rc=0;Rc<256;++Rc)Fa.push((Rc+256).toString(16).slice(1));const Ha={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ba(e,t,n){if(Ha.randomUUID&&!t&&!e)return Ha.randomUUID();const o=(e=e||{}).random||(e.rng||Va)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(Fa[e[t+0]]+Fa[e[t+1]]+Fa[e[t+2]]+Fa[e[t+3]]+"-"+Fa[e[t+4]]+Fa[e[t+5]]+"-"+Fa[e[t+6]]+Fa[e[t+7]]+"-"+Fa[e[t+8]]+Fa[e[t+9]]+"-"+Fa[e[t+10]]+Fa[e[t+11]]+Fa[e[t+12]]+Fa[e[t+13]]+Fa[e[t+14]]+Fa[e[t+15]]).toLowerCase()}(o)}class Ga{constructor(){this.listenerMap=new Map,this._listeners=[],this.proxyMap=new Map,this.proxies=[]}get listeners(){return this._listeners.concat(this.proxies.flatMap((e=>e())))}subscribe(e,t){this.listenerMap.has(e)&&(console.warn("Already subscribed. Unsubscribing for you.\nPlease check that you don't accidentally use the same token twice to register two different handlers for the same event/hook."),this.unsubscribe(e)),this.listenerMap.set(e,t),this._listeners.push(t)}unsubscribe(e){if(this.listenerMap.has(e)){const t=this.listenerMap.get(e);this.listenerMap.delete(e);const n=this._listeners.indexOf(t);n>=0&&this._listeners.splice(n,1)}}registerProxy(e,t){this.proxyMap.has(e)&&(console.warn("Already subscribed. Unsubscribing for you.\nPlease check that you don't accidentally use the same token twice to register two different proxies for the same event/hook."),this.unregisterProxy(e)),this.proxyMap.set(e,t),this.proxies.push(t)}unregisterProxy(e){if(!this.proxyMap.has(e))return;const t=this.proxyMap.get(e);this.proxyMap.delete(e);const n=this.proxies.indexOf(t);n>=0&&this.proxies.splice(n,1)}}class za extends Ga{constructor(e){super(),this.entity=e}emit(e){this.listeners.forEach((t=>t(e,this.entity)))}}class Wa extends Ga{constructor(e){super(),this.entity=e}emit(e){let t=!1;const n=()=>[t=!0];for(const o of Array.from(this.listeners.values()))if(o(e,n,this.entity),t)return{prevented:!0};return{prevented:!1}}}class qa extends Ga{execute(e,t){let n=e;for(const o of this.listeners)n=o(n,t);return n}}class Ka extends qa{constructor(e){super(),this.entity=e}execute(e){return super.execute(e,this.entity)}}class Xa extends Ga{constructor(e){super(),this.entity=e}execute(e){const t=[];for(const n of this.listeners)t.push(n(e,this.entity));return t}}function Ya(){const e=Symbol(),t=new Map,n=new Set,o=(n,o)=>{o instanceof Ga&&o.registerProxy(e,(()=>{var e,o;return null!==(o=null===(e=t.get(n))||void 0===e?void 0:e.listeners)&&void 0!==o?o:[]}))},r=e=>{n.add(e);for(const n of t.keys())o(n,e[n])},a=o=>{for(const n of t.keys())o[n]instanceof Ga&&o[n].unregisterProxy(e);n.delete(o)},i=()=>{n.forEach((e=>a(e))),t.clear()};return new Proxy({},{get:(e,s)=>"addTarget"===s?r:"removeTarget"===s?a:"destroy"===s?i:"string"!=typeof s||s.startsWith("_")?e[s]:(t.has(s)||(e=>{const r=new Ga;t.set(e,r),n.forEach((t=>o(e,t[e])))})(s),t.get(s))})}class Ja{constructor(e,t){if(this.destructed=!1,this.events={destruct:new za(this)},!e||!t)throw new Error("Cannot initialize connection with null/undefined for 'from' or 'to' values");this.id=Ba(),this.from=e,this.to=t,this.from.connectionCount++,this.to.connectionCount++}destruct(){this.events.destruct.emit(),this.from.connectionCount--,this.to.connectionCount--,this.destructed=!0}}class Za{constructor(e,t){if(!e||!t)throw new Error("Cannot initialize connection with null/undefined for 'from' or 'to' values");this.id=Ba(),this.from=e,this.to=t}}function Qa(e,t){return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,t(n)])))}class ei{constructor(){this._title="",this.id=Ba(),this.events={loaded:new za(this),beforeAddInput:new Wa(this),addInput:new za(this),beforeRemoveInput:new Wa(this),removeInput:new za(this),beforeAddOutput:new Wa(this),addOutput:new za(this),beforeRemoveOutput:new Wa(this),removeOutput:new za(this),beforeTitleChanged:new Wa(this),titleChanged:new za(this),update:new za(this)},this.hooks={beforeLoad:new Ka(this),afterSave:new Ka(this)}}get graph(){return this.graphInstance}get title(){return this._title}set title(e){this.events.beforeTitleChanged.emit(e).prevented||(this._title=e,this.events.titleChanged.emit(e))}addInput(e,t){return this.addInterface("input",e,t)}addOutput(e,t){return this.addInterface("output",e,t)}removeInput(e){return this.removeInterface("input",e)}removeOutput(e){return this.removeInterface("output",e)}registerGraph(e){this.graphInstance=e}load(e){this.hooks.beforeLoad.execute(e),this.id=e.id,this._title=e.title,Object.entries(e.inputs).forEach((([e,t])=>{this.inputs[e]&&(this.inputs[e].load(t),this.inputs[e].nodeId=this.id)})),Object.entries(e.outputs).forEach((([e,t])=>{this.outputs[e]&&(this.outputs[e].load(t),this.outputs[e].nodeId=this.id)})),this.events.loaded.emit(this)}save(){const e=Qa(this.inputs,(e=>e.save())),t=Qa(this.outputs,(e=>e.save())),n={type:this.type,id:this.id,title:this.title,inputs:e,outputs:t};return this.hooks.afterSave.execute(n)}onPlaced(){}onDestroy(){}initializeIo(){Object.entries(this.inputs).forEach((([e,t])=>this.initializeIntf("input",e,t))),Object.entries(this.outputs).forEach((([e,t])=>this.initializeIntf("output",e,t)))}initializeIntf(e,t,n){n.isInput="input"===e,n.nodeId=this.id,n.events.setValue.subscribe(this,(()=>this.events.update.emit({type:e,name:t,intf:n})))}addInterface(e,t,n){const o="input"===e?this.events.beforeAddInput:this.events.beforeAddOutput,r="input"===e?this.events.addInput:this.events.addOutput,a="input"===e?this.inputs:this.outputs;return!o.emit(n).prevented&&(a[t]=n,this.initializeIntf(e,t,n),r.emit(n),!0)}removeInterface(e,t){const n="input"===e?this.events.beforeRemoveInput:this.events.beforeRemoveOutput,o="input"===e?this.events.removeInput:this.events.removeOutput,r="input"===e?this.inputs[t]:this.outputs[t];if(!r||n.emit(r).prevented)return!1;if(r.connectionCount>0){if(!this.graphInstance)throw new Error("Interface is connected, but no graph instance is specified. Unable to delete interface");this.graphInstance.connections.filter((e=>e.from===r||e.to===r)).forEach((e=>{this.graphInstance.removeConnection(e)}))}return r.events.setValue.unsubscribe(this),"input"===e?delete this.inputs[t]:delete this.outputs[t],o.emit(r),!0}}class ti extends ei{load(e){super.load(e)}save(){return super.save()}}function ni(e){return class extends ti{constructor(){var t,n;super(),this.type=e.type,this.inputs={},this.outputs={},this.calculate=e.calculate?(t,n)=>e.calculate.call(this,t,n):void 0,this._title=null!==(t=e.title)&&void 0!==t?t:e.type,this.executeFactory("input",e.inputs),this.executeFactory("output",e.outputs),null===(n=e.onCreate)||void 0===n||n.call(this)}onPlaced(){var t;null===(t=e.onPlaced)||void 0===t||t.call(this)}onDestroy(){var t;null===(t=e.onDestroy)||void 0===t||t.call(this)}executeFactory(e,t){Object.keys(t||{}).forEach((n=>{const o=t[n]();"input"===e?this.addInput(n,o):this.addOutput(n,o)}))}}}class oi{get nodes(){return this._nodes}get connections(){return this._connections}get loading(){return this._loading}get destroying(){return this._destroying}constructor(e,t){this.id=Ba(),this.inputs=[],this.outputs=[],this.activeTransactions=0,this._nodes=[],this._connections=[],this._loading=!1,this._destroying=!1,this.events={beforeAddNode:new Wa(this),addNode:new za(this),beforeRemoveNode:new Wa(this),removeNode:new za(this),beforeAddConnection:new Wa(this),addConnection:new za(this),checkConnection:new Wa(this),beforeRemoveConnection:new Wa(this),removeConnection:new za(this)},this.hooks={save:new Ka(this),load:new Ka(this),checkConnection:new Xa(this)},this.nodeEvents=Ya(),this.nodeHooks=Ya(),this.connectionEvents=Ya(),this.editor=e,this.template=t,e.registerGraph(this)}addNode(e){if(!this.events.beforeAddNode.emit(e).prevented)return this.nodeEvents.addTarget(e.events),this.nodeHooks.addTarget(e.hooks),e.registerGraph(this),this._nodes.push(e),(e=this.nodes.find((t=>t.id===e.id))).onPlaced(),this.events.addNode.emit(e),e}removeNode(e){if(this.nodes.includes(e)){if(this.events.beforeRemoveNode.emit(e).prevented)return;const t=[...Object.values(e.inputs),...Object.values(e.outputs)];this.connections.filter((e=>t.includes(e.from)||t.includes(e.to))).forEach((e=>this.removeConnection(e))),this._nodes.splice(this.nodes.indexOf(e),1),this.events.removeNode.emit(e),e.onDestroy(),this.nodeEvents.removeTarget(e.events),this.nodeHooks.removeTarget(e.hooks)}}addConnection(e,t){const n=this.checkConnection(e,t);if(!n.connectionAllowed)return;if(this.events.beforeAddConnection.emit({from:e,to:t}).prevented)return;for(const r of n.connectionsInDanger){const e=this.connections.find((e=>e.id===r.id));e&&this.removeConnection(e)}const o=new Ja(n.dummyConnection.from,n.dummyConnection.to);return this.internalAddConnection(o),o}removeConnection(e){if(this.connections.includes(e)){if(this.events.beforeRemoveConnection.emit(e).prevented)return;e.destruct(),this._connections.splice(this.connections.indexOf(e),1),this.events.removeConnection.emit(e),this.connectionEvents.removeTarget(e.events)}}checkConnection(e,t){if(!e||!t)return{connectionAllowed:!1};const n=this.findNodeById(e.nodeId),o=this.findNodeById(t.nodeId);if(n&&o&&n===o)return{connectionAllowed:!1};if(e.isInput&&!t.isInput){const n=e;e=t,t=n}if(e.isInput||!t.isInput)return{connectionAllowed:!1};if(this.connections.some((n=>n.from===e&&n.to===t)))return{connectionAllowed:!1};if(this.events.checkConnection.emit({from:e,to:t}).prevented)return{connectionAllowed:!1};const r=this.hooks.checkConnection.execute({from:e,to:t});if(r.some((e=>!e.connectionAllowed)))return{connectionAllowed:!1};const a=Array.from(new Set(r.flatMap((e=>e.connectionsInDanger))));return{connectionAllowed:!0,dummyConnection:new Za(e,t),connectionsInDanger:a}}findNodeInterface(e){for(const t of this.nodes){for(const n in t.inputs){const o=t.inputs[n];if(o.id===e)return o}for(const n in t.outputs){const o=t.outputs[n];if(o.id===e)return o}}}findNodeById(e){return this.nodes.find((t=>t.id===e))}load(e){try{this._loading=!0;const t=[];for(let e=this.connections.length-1;e>=0;e--)this.removeConnection(this.connections[e]);for(let e=this.nodes.length-1;e>=0;e--)this.removeNode(this.nodes[e]);this.id=e.id,this.inputs=e.inputs,this.outputs=e.outputs;for(const n of e.nodes){const e=this.editor.nodeTypes.get(n.type);if(!e){t.push(`Node type ${n.type} is not registered`);continue}const o=new e.type;this.addNode(o),o.load(n)}for(const n of e.connections){const e=this.findNodeInterface(n.from),o=this.findNodeInterface(n.to);if(e)if(o){const t=new Ja(e,o);t.id=n.id,this.internalAddConnection(t)}else t.push(`Could not find interface with id ${n.to}`);else t.push(`Could not find interface with id ${n.from}`)}return this.hooks.load.execute(e),t}finally{this._loading=!1}}save(){const e={id:this.id,nodes:this.nodes.map((e=>e.save())),connections:this.connections.map((e=>({id:e.id,from:e.from.id,to:e.to.id}))),inputs:this.inputs,outputs:this.outputs};return this.hooks.save.execute(e)}destroy(){this._destroying=!0;for(const e of this.nodes)this.removeNode(e);this.editor.unregisterGraph(this)}internalAddConnection(e){this.connectionEvents.addTarget(e.events),this._connections.push(e),this.events.addConnection.emit(e)}}let ri=class{set connectionCount(e){this._connectionCount=e,this.events.setConnectionCount.emit(e)}get connectionCount(){return this._connectionCount}set value(e){this.events.beforeSetValue.emit(e).prevented||(this._value=e,this.events.setValue.emit(e))}get value(){return this._value}constructor(e,t){this.id=Ba(),this.nodeId="",this.port=!0,this.hidden=!1,this.events={setConnectionCount:new za(this),beforeSetValue:new Wa(this),setValue:new za(this),updated:new za(this)},this.hooks={load:new Ka(this),save:new Ka(this)},this._connectionCount=0,this.name=e,this._value=t}load(e){this.id=e.id,this.templateId=e.templateId,this.value=e.value,this.hooks.load.execute(e)}save(){const e={id:this.id,templateId:this.templateId,value:this.value};return this.hooks.save.execute(e)}setComponent(e){return this.component=e,this}setPort(e){return this.port=e,this}setHidden(e){return this.hidden=e,this}use(e,...t){return e(this,...t),this}};const ai="__baklava_GraphNode-";function ii(e){return ai+e.id}class si{static fromGraph(e,t){return new si(e.save(),t)}get name(){return this._name}set name(e){this._name=e,this.events.nameChanged.emit(e);const t=this.editor.nodeTypes.get(ii(this));t&&(t.title=e)}constructor(e,t){this.id=Ba(),this._name="Subgraph",this.events={nameChanged:new za(this),updated:new za(this)},this.hooks={beforeLoad:new Ka(this),afterSave:new Ka(this)},this.editor=t,e.id&&(this.id=e.id),e.name&&(this._name=e.name),this.update(e)}update(e){this.nodes=e.nodes,this.connections=e.connections,this.inputs=e.inputs,this.outputs=e.outputs,this.events.updated.emit()}save(){return{id:this.id,name:this.name,nodes:this.nodes,connections:this.connections,inputs:this.inputs,outputs:this.outputs}}createGraph(e){const t=new Map,n=e=>{const n=Ba();return t.set(e,n),n},o=e=>{const n=t.get(e);if(!n)throw new Error(`Unable to create graph from template: Could not map old id ${e} to new id`);return n},r=e=>Qa(e,(e=>({id:n(e.id),templateId:e.id,value:e.value}))),a=this.nodes.map((e=>({...e,id:n(e.id),inputs:r(e.inputs),outputs:r(e.outputs)}))),i=this.connections.map((e=>({id:n(e.id),from:o(e.from),to:o(e.to)}))),s=this.inputs.map((e=>({id:e.id,name:e.name,nodeInterfaceId:o(e.nodeInterfaceId)}))),l=this.outputs.map((e=>({id:e.id,name:e.name,nodeInterfaceId:o(e.nodeInterfaceId)}))),c={id:Ba(),nodes:a,connections:i,inputs:s,outputs:l};return e||(e=new oi(this.editor)),e.load(c),e.template=this,e}}class li extends Error{constructor(){super("Cycle detected")}}function ci(e){return"string"==typeof e}function ui(e,t){const n=new Map,o=new Map,r=new Map;let a,i;if(e instanceof oi)a=e.nodes,i=e.connections;else{if(!t)throw new Error("Invalid argument value: expected array of connections");a=e,i=t}a.forEach((e=>{Object.values(e.inputs).forEach((t=>n.set(t.id,e.id))),Object.values(e.outputs).forEach((t=>n.set(t.id,e.id)))})),a.forEach((e=>{const t=i.filter((t=>t.from&&n.get(t.from.id)===e.id)),a=new Set(t.map((e=>n.get(e.to.id))).filter(ci));o.set(e.id,a),r.set(e,t)}));const s=a.slice();i.forEach((e=>{const t=s.findIndex((t=>n.get(e.to.id)===t.id));t>=0&&s.splice(t,1)}));const l=[];for(;s.length>0;){const e=s.pop();l.push(e);const t=o.get(e.id);for(;t.size>0;){const e=t.values().next().value;if(t.delete(e),Array.from(o.values()).every((t=>!t.has(e)))){const t=a.find((t=>t.id===e));s.push(t)}}}if(Array.from(o.values()).some((e=>e.size>0)))throw new li;return{calculationOrder:l,connectionsFromNode:r,interfaceIdToNodeId:n}}var di;!function(e){e.Running="Running",e.Idle="Idle",e.Paused="Paused",e.Stopped="Stopped"}(di||(di={}));class pi{get status(){return this.isRunning?di.Running:this.internalStatus}constructor(e){this.editor=e,this.events={beforeRun:new Wa(this),afterRun:new za(this),statusChange:new za(this)},this.hooks={gatherCalculationData:new Ka(this),transferData:new qa},this.recalculateOrder=!0,this.internalStatus=di.Stopped,this.isRunning=!1,this.editor.nodeEvents.update.subscribe(this,((e,t)=>{t.graph&&!t.graph.loading&&0===t.graph.activeTransactions&&this.internalOnChange(t,null!=e?e:void 0)})),this.editor.graphEvents.addNode.subscribe(this,((e,t)=>{this.recalculateOrder=!0,t.loading||0!==t.activeTransactions||this.internalOnChange()})),this.editor.graphEvents.removeNode.subscribe(this,((e,t)=>{this.recalculateOrder=!0,t.loading||0!==t.activeTransactions||this.internalOnChange()})),this.editor.graphEvents.addConnection.subscribe(this,((e,t)=>{this.recalculateOrder=!0,t.loading||0!==t.activeTransactions||this.internalOnChange()})),this.editor.graphEvents.removeConnection.subscribe(this,((e,t)=>{this.recalculateOrder=!0,t.loading||0!==t.activeTransactions||this.internalOnChange()})),this.editor.graphHooks.checkConnection.subscribe(this,(e=>this.checkConnection(e.from,e.to)))}start(){this.internalStatus===di.Stopped&&(this.internalStatus=di.Idle,this.events.statusChange.emit(this.status))}pause(){this.internalStatus===di.Idle&&(this.internalStatus=di.Paused,this.events.statusChange.emit(this.status))}resume(){this.internalStatus===di.Paused&&(this.internalStatus=di.Idle,this.events.statusChange.emit(this.status))}stop(){this.internalStatus!==di.Idle&&this.internalStatus!==di.Paused||(this.internalStatus=di.Stopped,this.events.statusChange.emit(this.status))}async runOnce(e,...t){if(this.events.beforeRun.emit(e).prevented)return null;try{this.isRunning=!0,this.events.statusChange.emit(this.status),this.recalculateOrder&&this.calculateOrder();const n=await this.execute(e,...t);return this.events.afterRun.emit(n),n}finally{this.isRunning=!1,this.events.statusChange.emit(this.status)}}checkConnection(e,t){if(e.templateId){const t=this.findInterfaceByTemplateId(this.editor.graph.nodes,e.templateId);if(!t)return{connectionAllowed:!0,connectionsInDanger:[]};e=t}if(t.templateId){const e=this.findInterfaceByTemplateId(this.editor.graph.nodes,t.templateId);if(!e)return{connectionAllowed:!0,connectionsInDanger:[]};t=e}const n=new Za(e,t);let o=this.editor.graph.connections.slice();return t.allowMultipleConnections||(o=o.filter((e=>e.to!==t))),o.push(n),function(e,t){try{return ui(e,t),!1}catch(n){if(n instanceof li)return!0;throw n}}(this.editor.graph.nodes,o)?{connectionAllowed:!1,connectionsInDanger:[]}:{connectionAllowed:!0,connectionsInDanger:t.allowMultipleConnections?[]:this.editor.graph.connections.filter((e=>e.to===t))}}calculateOrder(){this.recalculateOrder=!0}async calculateWithoutData(...e){const t=this.hooks.gatherCalculationData.execute(void 0);return await this.runOnce(t,...e)}validateNodeCalculationOutput(e,t){if("object"!=typeof t)throw new Error(`Invalid calculation return value from node ${e.id} (type ${e.type})`);Object.keys(e.outputs).forEach((n=>{if(!(n in t))throw new Error(`Calculation return value from node ${e.id} (type ${e.type}) is missing key "${n}"`)}))}internalOnChange(e,t){this.internalStatus===di.Idle&&this.onChange(this.recalculateOrder,e,t)}findInterfaceByTemplateId(e,t){for(const n of e)for(const e of[...Object.values(n.inputs),...Object.values(n.outputs)])if(e.templateId===t)return e;return null}}class hi extends pi{constructor(e){super(e),this.order=new Map}start(){super.start(),this.recalculateOrder=!0,this.calculateWithoutData()}async runGraph(e,t,n){this.order.has(e.id)||this.order.set(e.id,ui(e));const{calculationOrder:o,connectionsFromNode:r}=this.order.get(e.id),a=new Map;for(const i of o){if(!i.calculate)continue;const e={};Object.entries(i.inputs).forEach((([n,o])=>{if(!t.has(o.id))throw new Error(`Could not find value for interface ${o.id}\nThis is likely a Baklava internal issue. Please report it on GitHub.`);e[n]=t.get(o.id)}));const o=await i.calculate(e,{globalValues:n,engine:this});this.validateNodeCalculationOutput(i,o),a.set(i.id,new Map(Object.entries(o))),r.has(i)&&r.get(i).forEach((e=>{var n;const r=null===(n=Object.entries(i.outputs).find((([,t])=>t.id===e.from.id)))||void 0===n?void 0:n[0];if(!r)throw new Error(`Could not find key for interface ${e.from.id}\nThis is likely a Baklava internal issue. Please report it on GitHub.`);const a=this.hooks.transferData.execute(o[r],e);e.to.allowMultipleConnections?t.has(e.to.id)?t.get(e.to.id).push(a):t.set(e.to.id,[a]):t.set(e.to.id,a)}))}return a}async execute(e){this.recalculateOrder&&(this.order.clear(),this.recalculateOrder=!1);const t=new Map;for(const n of this.editor.graph.nodes)Object.values(n.inputs).forEach((e=>{0===e.connectionCount&&t.set(e.id,e.value)}));return await this.runGraph(this.editor.graph,t,e)}onChange(e){this.recalculateOrder=e||this.recalculateOrder,this.calculateWithoutData()}}let vi=null;function fi(){if(!vi)throw new Error("providePlugin() must be called before usePlugin()");return{viewModel:vi}}function mi(){const{viewModel:e}=fi();return{graph:Mt(e.value,"displayedGraph"),switchGraph:e.value.switchGraph}}function gi(e){const{graph:t}=mi(),n=_t(null),o=_t(null);return{dragging:Rr((()=>!!n.value)),onPointerDown:t=>{n.value={x:t.pageX,y:t.pageY},o.value={x:e.value.x,y:e.value.y}},onPointerMove:r=>{if(n.value){const a=r.pageX-n.value.x,i=r.pageY-n.value.y;e.value.x=o.value.x+a/t.value.scaling,e.value.y=o.value.y+i/t.value.scaling}},onPointerUp:()=>{n.value=null,o.value=null}}}var bi=(e=>(e[e.NONE=0]="NONE",e[e.ALLOWED=1]="ALLOWED",e[e.FORBIDDEN=2]="FORBIDDEN",e))(bi||{});const yi=On({setup(){const{viewModel:e}=fi(),{graph:t}=mi(),n=Rr((()=>{const n=e.value.settings.background,o=t.value.panning.x*t.value.scaling,r=t.value.panning.y*t.value.scaling,a=t.value.scaling*n.gridSize,i=a/n.gridDivision;return{backgroundPosition:`left ${o}px top ${r}px`,backgroundSize:`${a}px ${a}px, ${a}px ${a}px ${t.value.scaling>n.subGridVisibleThreshold?`, ${i}px ${i}px, ${i}px ${i}px`:""}`}}));return{styles:n}}}),ki=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},wi=ki(yi,[["render",function(e,t,n,o,r,a){return Qo(),or("div",{class:"background",style:F(e.styles)},null,4)}]]);function _i(e){return!!Q()&&(function(e){J&&J.cleanups.push(e)}(e),!0)}function xi(e){return"function"==typeof e?e():Ct(e)}const Ci="undefined"!=typeof window,Ei=()=>{},Si=Ii();function Ii(){var e;return Ci&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}var Ni=Object.defineProperty,Oi=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Ti=Object.getOwnPropertySymbols,Ai=Object.prototype.hasOwnProperty,Pi=Object.prototype.propertyIsEnumerable,ji=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ri=(e,t)=>{for(var n in t||(t={}))Ai.call(t,n)&&ji(e,n,t[n]);if(Ti)for(var n of Ti(t))Pi.call(t,n)&&ji(e,n,t[n]);return e},$i=(e,t)=>Oi(e,Mi(t));function Di(e){if(!wt(e))return function(e){const t=h(e)?new Array(e.length):{};for(const n in e)t[n]=Tt(e,n);return t}(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=new It((()=>({get:()=>e.value[n],set(t){if(Array.isArray(e.value)){const o=[...e.value];o[n]=t,e.value=o}else{const o=$i(Ri({},e.value),{[n]:t});Object.setPrototypeOf(o,e.value),e.value=o}}})));return t}function Li(e){var t;const n=xi(e);return null!=(t=null==n?void 0:n.$el)?t:n}const Ui=Ci?window:void 0;function Vi(...e){let t,n,o,r;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,r]=e,t=Ui):[t,n,o,r]=e,!t)return Ei;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],i=()=>{a.forEach((e=>e())),a.length=0},s=pn((()=>[Li(t),xi(r)]),(([e,t])=>{i(),e&&a.push(...n.flatMap((n=>o.map((o=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,n,o,t))))))}),{immediate:!0,flush:"post"}),l=()=>{s(),i()};return _i(l),l}let Fi=!1;function Hi(e,t,n={}){const{window:o=Ui,ignore:r=[],capture:a=!0,detectIframe:i=!1}=n;if(!o)return;Si&&!Fi&&(Fi=!0,Array.from(o.document.body.children).forEach((e=>e.addEventListener("click",Ei))));let s=!0;const l=e=>r.some((t=>{if("string"==typeof t)return Array.from(o.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const n=Li(t);return n&&(e.target===n||e.composedPath().includes(n))}})),c=[Vi(o,"click",(n=>{const o=Li(e);o&&o!==n.target&&!n.composedPath().includes(o)&&(0===n.detail&&(s=!l(n)),s?t(n):s=!0)}),{passive:!0,capture:a}),Vi(o,"pointerdown",(t=>{const n=Li(e);n&&(s=!t.composedPath().includes(n)&&!l(t))}),{passive:!0}),i&&Vi(o,"blur",(n=>{var r;const a=Li(e);"IFRAME"!==(null==(r=o.document.activeElement)?void 0:r.tagName)||(null==a?void 0:a.contains(o.document.activeElement))||t(n)}))].filter(Boolean);return()=>c.forEach((e=>e()))}var Bi=Object.defineProperty,Gi=Object.defineProperties,zi=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,qi=Object.prototype.hasOwnProperty,Ki=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?Bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Yi={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},Ji=Object.keys(Yi);function Zi(e={}){const{target:t=Ui}=e,n=_t(!1),o=_t(e.initialValue||{});Object.assign(o.value,Yi,o.value);const r=t=>{n.value=!0,e.pointerTypes&&!e.pointerTypes.includes(t.pointerType)||(o.value=function(e,t,n=!1){return t.reduce(((t,o)=>(o in e&&(n&&void 0===e[o]||(t[o]=e[o])),t)),{})}(t,Ji,!1))};return t&&(Vi(t,"pointerdown",r,{passive:!0}),Vi(t,"pointermove",r,{passive:!0}),Vi(t,"pointerleave",(()=>n.value=!1),{passive:!0})),a=((e,t)=>{for(var n in t||(t={}))qi.call(t,n)&&Xi(e,n,t[n]);if(Wi)for(var n of Wi(t))Ki.call(t,n)&&Xi(e,n,t[n]);return e})({},Di(o)),Gi(a,zi({isInside:n}));var a}const Qi=On({props:{modelValue:{type:Boolean,default:!1},items:{type:Array,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},isNested:{type:Boolean,default:!1},isFlipped:{type:Object,default:()=>({x:!1,y:!1})},flippable:{type:Boolean,default:!1}},emits:["click","update:modelValue"],setup(e,{emit:t}){let n=null;const o=_t(null),r=_t(-1),a=_t(0),i=_t({x:!1,y:!1}),s=Rr((()=>e.flippable&&(i.value.x||e.isFlipped.x))),l=Rr((()=>e.flippable&&(i.value.y||e.isFlipped.y))),c=Rr((()=>{const t={};return e.isNested||(t.top=(l.value?e.y-a.value:e.y)+"px",t.left=e.x+"px"),t})),u=Rr((()=>({"--flipped-x":s.value,"--flipped-y":l.value,"--nested":e.isNested}))),d=Rr((()=>e.items.map((e=>({...e,hover:!1})))));return pn([()=>e.y,()=>e.items],(()=>{var t,n,r,s;a.value=30*e.items.length;const l=(null==(n=null==(t=o.value)?void 0:t.parentElement)?void 0:n.offsetWidth)??0,c=(null==(s=null==(r=o.value)?void 0:r.parentElement)?void 0:s.offsetHeight)??0;i.value.x=!e.isNested&&e.x>.75*l,i.value.y=!e.isNested&&e.y+a.value>c-20})),Hi(o,(()=>{e.modelValue&&t("update:modelValue",!1)})),{el:o,activeMenu:r,flippedX:s,flippedY:l,styles:c,classes:u,itemsWithHoverProperty:d,onClick:e=>{!e.submenu&&e.value&&(t("click",e.value),t("update:modelValue",!1))},onChildClick:n=>{t("click",n),r.value=-1,e.isNested||t("update:modelValue",!1)},onClickOutside:Hi,onMouseEnter:(t,o)=>{e.items[o].submenu&&(r.value=o,null!==n&&(clearTimeout(n),n=null))},onMouseLeave:(t,o)=>{e.items[o].submenu&&(n=window.setTimeout((()=>{r.value=-1,n=null}),200))}}}}),es=["onMouseenter","onMouseleave","onClick"],ts={class:"flex-fill"},ns={key:0,class:"__submenu-icon",style:{"line-height":"1em"}},os=[ur("svg",{width:"13",height:"13",viewBox:"-60 120 250 250"},[ur("path",{d:"M160.875 279.5625 L70.875 369.5625 L70.875 189.5625 L160.875 279.5625 Z",stroke:"none",fill:"white"})],-1)],rs=ki(Qi,[["render",function(e,t,n,o,r,a){const i=Xn("context-menu",!0);return Qo(),rr(na,{name:"slide-fade"},{default:an((()=>[gn(ur("div",{ref:"el",class:W(["baklava-context-menu",e.classes]),style:F(e.styles)},[(Qo(!0),or(qo,null,eo(e.itemsWithHoverProperty,((t,n)=>(Qo(),or(qo,null,[t.isDivider?(Qo(),or("div",{key:`d-${n}`,class:"divider"})):(Qo(),or("div",{key:`i-${n}`,class:W(["item",{submenu:!!t.submenu,"--disabled":!!t.disabled}]),onMouseenter:t=>e.onMouseEnter(t,n),onMouseleave:t=>e.onMouseLeave(t,n),onClick:Ta((n=>e.onClick(t)),["stop","prevent"])},[ur("div",ts,X(t.label),1),t.submenu?(Qo(),or("div",ns,os)):fr("",!0),t.submenu?(Qo(),rr(i,{key:1,value:e.activeMenu===n,items:t.submenu,"is-nested":!0,"is-flipped":{x:e.flippedX,y:e.flippedY},flippable:e.flippable,onClick:e.onChildClick},null,8,["value","items","is-flipped","flippable","onClick"])):fr("",!0)],42,es))],64)))),256))],6),[[ja,e.modelValue]])])),_:1})}]]),as={},is={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},ss=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("circle",{cx:"12",cy:"12",r:"1"},null,-1),ur("circle",{cx:"12",cy:"19",r:"1"},null,-1),ur("circle",{cx:"12",cy:"5",r:"1"},null,-1)],ls=ki(as,[["render",function(e,t){return Qo(),or("svg",is,ss)}]]),cs=On({props:{node:{type:Object,required:!0},intf:{type:Object,required:!0}},setup(e){const{viewModel:t}=fi(),n=So("hoveredOver"),o=_t(null),r=Rr((()=>e.intf.connectionCount>0)),a=Rr((()=>({"--input":e.intf.isInput,"--output":!e.intf.isInput,"--connected":r.value}))),i=Rr((()=>e.intf.component&&0===e.intf.connectionCount&&(e.intf.isInput||!e.intf.port))),s=()=>{o.value&&t.value.hooks.renderInterface.execute({intf:e.intf,el:o.value})};return Un(s),Fn(s),{el:o,isConnected:r,classes:a,showComponent:i,startHover:()=>{n(e.intf)},endHover:()=>{n(void 0)},openSidebar:()=>{const n=t.value.displayedGraph.sidebar;n.nodeId=e.node.id,n.optionName=e.intf.name,n.visible=!0}}}}),us=["id"],ds={key:2,class:"align-middle"},ps=ki(cs,[["render",function(e,t,n,o,r,a){return Qo(),or("div",{id:e.intf.id,ref:"el",class:W(["baklava-node-interface",e.classes])},[e.intf.port?(Qo(),or("div",{key:0,class:"__port",onPointerover:t[0]||(t[0]=(...t)=>e.startHover&&e.startHover(...t)),onPointerout:t[1]||(t[1]=(...t)=>e.endHover&&e.endHover(...t))},null,32)):fr("",!0),e.showComponent?(Qo(),rr(Jn(e.intf.component),{key:1,modelValue:e.intf.value,"onUpdate:modelValue":t[2]||(t[2]=t=>e.intf.value=t),node:e.node,intf:e.intf,onOpenSidebar:e.openSidebar},null,40,["modelValue","node","intf","onOpenSidebar"])):(Qo(),or("span",ds,X(e.intf.name),1))],10,us)}]]),hs=["id","data-node-type"],vs=["onPointerdown"],fs={class:"__title-label"},ms={class:"__menu"},gs=["onKeydown"],bs={class:"__outputs"},ys={class:"__inputs"},ks=On({__name:"Node",props:{node:{},selected:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const n=e,{viewModel:o}=fi(),{graph:r,switchGraph:a}=mi(),i=gi(Mt(n.node,"position")),s=_t(null),l=_t(!1),c=_t(""),u=_t(null),d=_t(!1),p=Rr((()=>{const e=[{value:"rename",label:"Rename"},{value:"delete",label:"Delete"}];return n.node.type.startsWith(ai)&&e.push({value:"editSubgraph",label:"Edit Subgraph"}),e})),h=Rr((()=>({"--selected":n.selected,"--dragging":i.dragging.value,"--two-column":!!n.node.twoColumn}))),v=Rr((()=>{var e,t;return{top:`${(null==(e=n.node.position)?void 0:e.y)??0}px`,left:`${(null==(t=n.node.position)?void 0:t.x)??0}px`,width:`${n.node.width??200}px`}})),f=Rr((()=>Object.values(n.node.inputs).filter((e=>!e.hidden)))),m=Rr((()=>Object.values(n.node.outputs).filter((e=>!e.hidden)))),g=()=>{t("select")},b=e=>{i.onPointerDown(e),document.addEventListener("pointermove",i.onPointerMove),document.addEventListener("pointerup",y),g()},y=()=>{i.onPointerUp(),document.removeEventListener("pointermove",i.onPointerMove),document.removeEventListener("pointerup",y)},k=()=>{d.value=!0},w=async e=>{var t;switch(e){case"delete":r.value.removeNode(n.node);break;case"rename":c.value=n.node.title,l.value=!0,await zt(),null==(t=u.value)||t.focus();break;case"editSubgraph":a(n.node.template)}},_=()=>{n.node.title=c.value,l.value=!1},x=()=>{s.value&&o.value.hooks.renderNode.execute({node:n.node,el:s.value})};return Un(x),Fn(x),(e,t)=>(Qo(),or("div",{id:e.node.id,ref_key:"el",ref:s,class:W(["baklava-node",h.value]),style:F(v.value),"data-node-type":e.node.type,onPointerdown:g},[ur("div",{class:"__title",onPointerdown:Ta(b,["self","stop"])},[l.value?gn((Qo(),or("input",{key:1,ref_key:"renameInputEl",ref:u,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),type:"text",class:"baklava-input",placeholder:"Node Name",onBlur:_,onKeydown:[Pa(_,["enter"]),t[2]||(t[2]=Pa(Ta((()=>{}),["stop"]),["delete"]))]},null,40,gs)),[[Na,c.value]]):(Qo(),or(qo,{key:0},[ur("div",fs,X(e.node.title),1),ur("div",ms,[dr(ls,{class:"--clickable",onClick:k}),dr(rs,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),x:0,y:0,items:p.value,onClick:w},null,8,["modelValue","items"])])],64))],40,vs),ur("div",{class:"__content",onKeydown:t[3]||(t[3]=Pa(Ta((()=>{}),["stop"]),["delete"]))},[ur("div",bs,[(Qo(!0),or(qo,null,eo(m.value,(t=>(Qo(),rr(ps,{key:t.id,node:e.node,intf:t},null,8,["node","intf"])))),128))]),ur("div",ys,[(Qo(!0),or(qo,null,eo(f.value,(t=>(Qo(),rr(ps,{key:t.id,node:e.node,intf:t},null,8,["node","intf"])))),128))])],32)],46,hs))}}),ws=On({props:{x1:{type:Number,required:!0},y1:{type:Number,required:!0},x2:{type:Number,required:!0},y2:{type:Number,required:!0},state:{type:Number,default:bi.NONE},isTemporary:{type:Boolean,default:!1}},setup(e){const{viewModel:t}=fi(),{graph:n}=mi(),o=(e,t)=>[(e+n.value.panning.x)*n.value.scaling,(t+n.value.panning.y)*n.value.scaling];return{d:Rr((()=>{const[n,r]=o(e.x1,e.y1),[a,i]=o(e.x2,e.y2);if(t.value.settings.useStraightConnections)return`M ${n} ${r} L ${a} ${i}`;{const e=.3*Math.abs(n-a);return`M ${n} ${r} C ${n+e} ${r}, ${a-e} ${i}, ${a} ${i}`}})),classes:Rr((()=>({"--temporary":e.isTemporary,"--allowed":e.state===bi.ALLOWED,"--forbidden":e.state===bi.FORBIDDEN})))}}}),_s=["d"],xs=ki(ws,[["render",function(e,t,n,o,r,a){return Qo(),or("path",{class:W(["baklava-connection",e.classes]),d:e.d},null,10,_s)}]]);function Cs(e){const t=document.getElementById(e.id),n=null==t?void 0:t.getElementsByClassName("__port");return{node:(null==t?void 0:t.closest(".baklava-node"))??null,interface:t,port:n&&n.length>0?n[0]:null}}const Es=ki(On({components:{"connection-view":xs},props:{connection:{type:Object,required:!0}},setup(e){const{graph:t}=mi();let n;const o=_t({x1:0,y1:0,x2:0,y2:0}),r=Rr((()=>e.connection.isInDanger?bi.FORBIDDEN:bi.NONE)),a=Rr((()=>{var n;return null==(n=t.value.findNodeById(e.connection.from.nodeId))?void 0:n.position})),i=Rr((()=>{var n;return null==(n=t.value.findNodeById(e.connection.to.nodeId))?void 0:n.position})),s=e=>e.node&&e.interface&&e.port?[e.node.offsetLeft+e.interface.offsetLeft+e.port.offsetLeft+e.port.clientWidth/2,e.node.offsetTop+e.interface.offsetTop+e.port.offsetTop+e.port.clientHeight/2]:[0,0],l=()=>{const t=Cs(e.connection.from),r=Cs(e.connection.to);t.node&&r.node&&(n||(n=new ResizeObserver((()=>{l()})),n.observe(t.node),n.observe(r.node)));const[a,i]=s(t),[c,u]=s(r);o.value={x1:a,y1:i,x2:c,y2:u}};return Un((async()=>{await zt(),l()})),Hn((()=>{n&&n.disconnect()})),pn([a,i],(()=>l()),{deep:!0}),{d:o,state:r}}}),[["render",function(e,t,n,o,r,a){const i=Xn("connection-view");return Qo(),rr(i,{x1:e.d.x1,y1:e.d.y1,x2:e.d.x2,y2:e.d.y2,state:e.state},null,8,["x1","y1","x2","y2","state"])}]]);function Ss(e){return e.node&&e.interface&&e.port?[e.node.offsetLeft+e.interface.offsetLeft+e.port.offsetLeft+e.port.clientWidth/2,e.node.offsetTop+e.interface.offsetTop+e.port.offsetTop+e.port.clientHeight/2]:[0,0]}const Is=ki(On({components:{"connection-view":xs},props:{connection:{type:Object,required:!0}},setup(e){const t=Rr((()=>e.connection?e.connection.status:bi.NONE));return{d:Rr((()=>{if(!e.connection)return{input:[0,0],output:[0,0]};const t=Ss(Cs(e.connection.from)),n=e.connection.to?Ss(Cs(e.connection.to)):[e.connection.mx||t[0],e.connection.my||t[1]];return e.connection.from.isInput?{input:n,output:t}:{input:t,output:n}})),status:t}}}),[["render",function(e,t,n,o,r,a){const i=Xn("connection-view");return Qo(),rr(i,{x1:e.d.input[0],y1:e.d.input[1],x2:e.d.output[0],y2:e.d.output[1],state:e.status,"is-temporary":""},null,8,["x1","y1","x2","y2","state"])}]]),Ns=On({setup(){const{viewModel:e}=fi(),{graph:t}=mi(),n=_t(null),o=Mt(e.value.settings.sidebar,"width"),r=Rr((()=>e.value.settings.sidebar.resizable)),a=Rr((()=>{const e=t.value.sidebar.nodeId;return t.value.nodes.find((t=>t.id===e))})),i=Rr((()=>({width:`${o.value}px`}))),s=Rr((()=>a.value?[...Object.values(a.value.inputs),...Object.values(a.value.outputs)].filter((e=>e.displayInSidebar&&e.component)):[])),l=e=>{var t,r;const a=(null==(r=null==(t=n.value)?void 0:t.parentElement)?void 0:r.getBoundingClientRect().width)??500;let i=o.value-e.movementX;i<300?i=300:i>.9*a&&(i=.9*a),o.value=i};return{el:n,graph:t,resizable:r,node:a,styles:i,displayedInterfaces:s,startResize:()=>{window.addEventListener("mousemove",l),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",l)}),{once:!0})},close:()=>{t.value.sidebar.visible=!1}}}}),Os={class:"__header"},Ms={class:"__node-name"},Ts=ki(Ns,[["render",function(e,t,n,o,r,a){return Qo(),or("div",{ref:"el",class:W(["baklava-sidebar",{"--open":e.graph.sidebar.visible}]),style:F(e.styles),onKeydown:t[2]||(t[2]=Pa(Ta((()=>{}),["stop"]),["delete"]))},[e.resizable?(Qo(),or("div",{key:0,class:"__resizer",onMousedown:t[0]||(t[0]=(...t)=>e.startResize&&e.startResize(...t))},null,32)):fr("",!0),ur("div",Os,[ur("button",{tabindex:"-1",class:"__close",onClick:t[1]||(t[1]=(...t)=>e.close&&e.close(...t))},"×"),ur("div",Ms,[ur("b",null,X(e.node?e.node.title:""),1)])]),(Qo(!0),or(qo,null,eo(e.displayedInterfaces,(t=>(Qo(),or("div",{key:t.id,class:"__interface"},[(Qo(),rr(Jn(t.component),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,node:e.node,intf:t},null,8,["modelValue","onUpdate:modelValue","node","intf"]))])))),128))],38)}]]),As=ki(On({setup(){const{viewModel:e}=fi(),{graph:t}=mi(),n=_t(null),o=_t(!1);let r,a=!1,i={x1:0,y1:0,x2:0,y2:0};const s=(e,t)=>[(e-i.x1)/(i.x2-i.x1)*r.canvas.clientWidth,(t-i.y1)/(i.y2-i.y1)*r.canvas.clientHeight],l=e=>{if(e){const t=e.querySelector(".__content");if(t){const e=c(t);if(e)return e}const n=c(e);if(n)return n}return"gray"},c=e=>{const t=getComputedStyle(e).backgroundColor;if(t&&"rgba(0, 0, 0, 0)"!==t)return t},u=()=>{const e=n.value.parentElement.offsetWidth,o=n.value.parentElement.offsetHeight,r=e/t.value.scaling-t.value.panning.x,a=o/t.value.scaling-t.value.panning.y;return{x1:-t.value.panning.x,y1:-t.value.panning.y,x2:r,y2:a}},d=e=>{if(a){const[a,s]=(n=e.offsetX,o=e.offsetY,[n*(i.x2-i.x1)/r.canvas.clientWidth+i.x1,o*(i.y2-i.y1)/r.canvas.clientHeight+i.y1]),l=u(),c=(l.x1-l.x2)/2,d=(l.y1-l.y2)/2;t.value.panning.x=-(a+c),t.value.panning.y=-(s+d)}var n,o},p=()=>{a=!1};return Un((()=>{r=n.value.getContext("2d"),r.imageSmoothingQuality="high",(()=>{var n,a;if(!r)return;const c=new Map,d=new Map;for(const e of t.value.nodes){const t=(p=e,document.getElementById(p.id)),o=(null==t?void 0:t.clientWidth)??0,r=(null==t?void 0:t.clientHeight)??0,i=(null==(n=e.position)?void 0:n.x)??0,s=(null==(a=e.position)?void 0:a.y)??0;c.set(e,{x1:i,y1:s,x2:i+o,y2:s+r}),d.set(e,t)}var p;const h={x1:Number.MAX_SAFE_INTEGER,y1:Number.MAX_SAFE_INTEGER,x2:Number.MIN_SAFE_INTEGER,y2:Number.MIN_SAFE_INTEGER};for(const e of c.values())e.x1<h.x1&&(h.x1=e.x1),e.y1<h.y1&&(h.y1=e.y1),e.x2>h.x2&&(h.x2=e.x2),e.y2>h.y2&&(h.y2=e.y2);h.x1-=50,h.y1-=50,h.x2+=50,h.y2+=50,i=h,r.clearRect(0,0,r.canvas.width,r.canvas.height),r.strokeStyle="white";for(const o of t.value.connections){const[t,n]=Ss(Cs(o.from)),[a,i]=Ss(Cs(o.to)),[l,c]=s(t,n),[u,d]=s(a,i);if(r.beginPath(),r.moveTo(l,c),e.value.settings.useStraightConnections)r.lineTo(u,d);else{const e=.3*Math.abs(l-u);r.bezierCurveTo(l+e,c,u-e,d,u,d)}r.stroke()}r.strokeStyle="lightgray";for(const[e,t]of c.entries()){const[n,o]=s(t.x1,t.y1),[a,i]=s(t.x2,t.y2);r.fillStyle=l(d.get(e)),r.beginPath(),r.rect(n,o,a-n,i-o),r.fill(),r.stroke()}if(o.value){const e=u(),[t,n]=s(e.x1,e.y1),[o,a]=s(e.x2,e.y2);r.fillStyle="rgba(255, 255, 255, 0.2)",r.fillRect(t,n,o-t,a-n)}})()})),{canvas:n,showViewBounds:o,mousedown:e=>{0===e.button&&(a=!0,d(e))},mousemove:d,mouseup:p,mouseenter:()=>{o.value=!0},mouseleave:()=>{o.value=!1,p()}}}}),[["render",function(e,t,n,o,r,a){return Qo(),or("canvas",{ref:"canvas",class:"baklava-minimap",onMouseenter:t[0]||(t[0]=(...t)=>e.mouseenter&&e.mouseenter(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.mouseleave&&e.mouseleave(...t)),onMousedown:t[2]||(t[2]=Ta(((...t)=>e.mousedown&&e.mousedown(...t)),["self"])),onMousemove:t[3]||(t[3]=Ta(((...t)=>e.mousemove&&e.mousemove(...t)),["self"])),onMouseup:t[4]||(t[4]=(...t)=>e.mouseup&&e.mouseup(...t))},null,544)}]]),Ps=On({components:{ContextMenu:rs,VerticalDots:ls},props:{type:{type:String,required:!0},title:{type:String,required:!0}},setup(e){const{viewModel:t}=fi(),{switchGraph:n}=mi(),o=_t(!1),r=Rr((()=>e.type.startsWith(ai)));return{showContextMenu:o,hasContextMenu:r,contextMenuItems:[{label:"Edit Subgraph",value:"editSubgraph"},{label:"Delete Subgraph",value:"deleteSubgraph"}],openContextMenu:()=>{o.value=!0},onContextMenuClick:o=>{const r=e.type.substring(ai.length),a=t.value.editor.graphTemplates.find((e=>e.id===r));if(a)switch(o){case"editSubgraph":n(a);break;case"deleteSubgraph":t.value.editor.removeGraphTemplate(a)}}}}}),js=["data-node-type"],Rs={class:"__title"},$s={class:"__title-label"},Ds={key:0,class:"__menu"},Ls=ki(Ps,[["render",function(e,t,n,o,r,a){const i=Xn("vertical-dots"),s=Xn("context-menu");return Qo(),or("div",{class:"baklava-node --palette","data-node-type":e.type},[ur("div",Rs,[ur("div",$s,X(e.title),1),e.hasContextMenu?(Qo(),or("div",Ds,[dr(i,{class:"--clickable",onPointerdown:t[0]||(t[0]=Ta((()=>{}),["stop","prevent"])),onClick:Ta(e.openContextMenu,["stop","prevent"])},null,8,["onClick"]),dr(s,{modelValue:e.showContextMenu,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showContextMenu=t),x:-100,y:0,items:e.contextMenuItems,onClick:e.onContextMenuClick,onPointerdown:t[2]||(t[2]=Ta((()=>{}),["stop","prevent"]))},null,8,["modelValue","items","onClick"])])):fr("",!0)])],8,js)}]]);let Us;const Vs=new Uint8Array(16);function Fs(){if(!Us&&(Us="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Us))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Us(Vs)}const Hs=[];for(let Rc=0;Rc<256;++Rc)Hs.push((Rc+256).toString(16).slice(1));const Bs={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Gs(e,t,n){if(Bs.randomUUID&&!t&&!e)return Bs.randomUUID();const o=(e=e||{}).random||(e.rng||Fs)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(Hs[e[t+0]]+Hs[e[t+1]]+Hs[e[t+2]]+Hs[e[t+3]]+"-"+Hs[e[t+4]]+Hs[e[t+5]]+"-"+Hs[e[t+6]]+Hs[e[t+7]]+"-"+Hs[e[t+8]]+Hs[e[t+9]]+"-"+Hs[e[t+10]]+Hs[e[t+11]]+Hs[e[t+12]]+Hs[e[t+13]]+Hs[e[t+14]]+Hs[e[t+15]]).toLowerCase()}(o)}class zs extends ri{constructor(e,t,n,o){super(e,t),this.min=n,this.max=o}validate(e){return(!this.min||e>=this.min)&&(!this.max||e<=this.max)}}const Ws={},qs={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Ks=[ur("polyline",{points:"6 9 12 15 18 9"},null,-1)],Xs=ki(Ws,[["render",function(e,t){return Qo(),or("svg",qs,Ks)}]]),Ys=On({components:{"i-arrow":Xs},props:{intf:{type:Object,required:!0}},setup(e){const t=((e,t=3)=>{const n=_t(null),o=_t(!1),r=_t(!1),a=_t("0"),i=Rr((()=>{const n=e.value.value.toFixed(t);return n.length>9?e.value.value.toExponential(4):n})),s=t=>!Number.isNaN(t)&&(!function(e){return"validate"in e}(e.value)||e.value.validate(t)),l=t=>{s(t)&&(e.value.value=t)};return pn(a,(()=>{r.value=!1})),{editMode:o,invalid:r,tempValue:a,inputEl:n,stringRepresentation:i,validate:s,setValue:l,enterEditMode:async()=>{a.value=e.value.value.toFixed(t),o.value=!0,await zt(),n.value&&n.value.focus()},leaveEditMode:()=>{const e=parseFloat(a.value);s(e)?(l(e),o.value=!1):r.value=!0}}})(Mt(e,"intf"));return{...t,increment:()=>{t.setValue(e.intf.value+.1)},decrement:()=>{t.setValue(e.intf.value-.1)}}}}),Js={class:"baklava-num-input"},Zs=["title"],Qs={class:"__value"},el={key:1,class:"__content"},tl=ki(Ys,[["render",function(e,t,n,o,r,a){const i=Xn("i-arrow");return Qo(),or("div",Js,[ur("div",{class:"__button --dec",onClick:t[0]||(t[0]=(...t)=>e.decrement&&e.decrement(...t))},[dr(i)]),e.editMode?(Qo(),or("div",el,[gn(ur("input",{ref:"inputEl","onUpdate:modelValue":t[2]||(t[2]=t=>e.tempValue=t),type:"number",class:W(["baklava-input",{"--invalid":e.invalid}]),style:{"text-align":"right"},onBlur:t[3]||(t[3]=(...t)=>e.leaveEditMode&&e.leaveEditMode(...t)),onKeydown:t[4]||(t[4]=Pa(((...t)=>e.leaveEditMode&&e.leaveEditMode(...t)),["enter"]))},null,34),[[Na,e.tempValue]])])):(Qo(),or("div",{key:0,class:"__content",onClick:t[1]||(t[1]=(...t)=>e.enterEditMode&&e.enterEditMode(...t))},[ur("div",{class:"__label",title:e.intf.name},X(e.intf.name),9,Zs),ur("div",Qs,X(e.stringRepresentation),1)])),ur("div",{class:"__button --inc",onClick:t[5]||(t[5]=(...t)=>e.increment&&e.increment(...t))},[dr(i)])])}]]);class nl extends zs{constructor(){super(...arguments),this.component=mt(tl)}}const ol=On({components:{"i-arrow":Xs},props:{intf:{type:Object,required:!0}},setup(e){const t=_t(null),n=_t(!1),o=Rr((()=>e.intf.items.find((t=>"string"==typeof t?t===e.intf.value:t.value===e.intf.value)))),r=Rr((()=>o.value?"string"==typeof o.value?o.value:o.value.text:""));return Hi(t,(()=>{n.value=!1})),{el:t,open:n,selectedItem:o,selectedText:r,setSelected:t=>{e.intf.value="string"==typeof t?t:t.value}}}}),rl=["title"],al={class:"__selected"},il={class:"__text"},sl={class:"__icon"},ll={class:"__dropdown"},cl={class:"item --header"},ul=["onClick"],dl=ki(ol,[["render",function(e,t,n,o,r,a){const i=Xn("i-arrow");return Qo(),or("div",{ref:"el",class:W(["baklava-select",{"--open":e.open}]),title:e.intf.name,onClick:t[0]||(t[0]=t=>e.open=!e.open)},[ur("div",al,[ur("div",il,X(e.selectedText),1),ur("div",sl,[dr(i)])]),dr(na,{name:"slide-fade"},{default:an((()=>[gn(ur("div",ll,[ur("div",cl,X(e.intf.name),1),(Qo(!0),or(qo,null,eo(e.intf.items,((t,n)=>(Qo(),or("div",{key:n,class:W(["item",{"--active":t===e.selectedItem}]),onClick:n=>e.setSelected(t)},X("string"==typeof t?t:t.text),11,ul)))),128))],512),[[ja,e.open]])])),_:1})],10,rl)}]]);class pl extends ri{constructor(e,t,n){super(e,t),this.component=mt(dl),this.items=n}}const hl=ki(On({props:{intf:{type:Object,required:!0}}}),[["render",function(e,t,n,o,r,a){return Qo(),or("div",null,X(e.intf.value),1)}]]);class vl extends ri{constructor(e,t){super(e,t),this.component=mt(hl),this.setPort(!1)}}const fl=On({props:{intf:{type:Object,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup:(e,{emit:t})=>({v:Rr({get:()=>e.modelValue,set:e=>{t("update:modelValue",e)}})})}),ml=["placeholder","title"],gl=ki(fl,[["render",function(e,t,n,o,r,a){return Qo(),or("div",null,[gn(ur("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.v=t),type:"text",class:"baklava-input",placeholder:e.intf.name,title:e.intf.name},null,8,ml),[[Na,e.v]])])}]]);class bl extends ri{constructor(){super(...arguments),this.component=mt(gl)}}const yl="__baklava_SubgraphInputNode",kl="__baklava_SubgraphOutputNode",wl=ni({type:yl,title:"Subgraph Input",inputs:{name:()=>new bl("Name","Input").setPort(!1)},outputs:{placeholder:()=>new ri("Connection",void 0)},onCreate(){this.graphInterfaceId=Gs()}}),_l=ni({type:kl,title:"Subgraph Output",inputs:{name:()=>new bl("Name","Output").setPort(!1),placeholder:()=>new ri("Connection",void 0)},onCreate(){this.graphInterfaceId=Gs()}});function xl(e,t,n){if(!t.template)return!1;if(ii(t.template)===n)return!0;const o=e.graphTemplates.find((e=>ii(e)===n));return!!o&&o.nodes.filter((e=>e.type.startsWith(ai))).some((n=>xl(e,t,n.type)))}const Cl=On({components:{PaletteEntry:Ls},setup(){const{viewModel:e}=fi(),{x:t,y:n}=Zi(),{transform:o}=function(){const{graph:e}=mi();return{transform:(t,n)=>[t/e.value.scaling-e.value.panning.x,n/e.value.scaling-e.value.panning.y]}}(),r=So("editorEl"),a=_t(null),i=Rr((()=>{const t=Array.from(e.value.editor.nodeTypes.entries()),n=new Set(t.map((([,e])=>e.category))),o=[];for(const r of n.values()){let n=t.filter((([,e])=>e.category===r));n=e.value.displayedGraph.template?n.filter((([t])=>!xl(e.value.editor,e.value.displayedGraph,t))):n.filter((([e])=>![yl,kl].includes(e))),n.length>0&&o.push({name:r,nodeTypes:Object.fromEntries(n)})}return o.sort(((e,t)=>"default"===e.name?-1:"default"===t.name||e.name>t.name?1:-1)),o})),s=Rr((()=>{if(!a.value||!(null==r?void 0:r.value))return{};const{left:e,top:o}=r.value.getBoundingClientRect();return{top:n.value-o+"px",left:t.value-e+"px"}}));return{draggedNode:a,categories:i,draggedNodeStyles:s,onDragStart:(i,s)=>{a.value={type:i,nodeInformation:s};const l=()=>{const i=lt(new s.type);e.value.displayedGraph.addNode(i);const c=r.value.getBoundingClientRect(),[u,d]=o(t.value-c.left,n.value-c.top);i.position.x=u,i.position.y=d,a.value=null,document.removeEventListener("pointerup",l)};document.addEventListener("pointerup",l)},mouseX:t,mouseY:n}}}),El={class:"baklava-node-palette"},Sl={key:0},Il=ki(Cl,[["render",function(e,t,n,o,r,a){const i=Xn("PaletteEntry");return Qo(),or(qo,null,[ur("div",El,[(Qo(!0),or(qo,null,eo(e.categories,(t=>(Qo(),or("section",{key:t.name},["default"!==t.name?(Qo(),or("h1",Sl,X(t.name),1)):fr("",!0),(Qo(!0),or(qo,null,eo(t.nodeTypes,((t,n)=>(Qo(),rr(i,{key:n,type:n,title:t.title,onPointerdown:o=>e.onDragStart(n,t)},null,8,["type","title","onPointerdown"])))),128))])))),128))]),dr(na,{name:"fade"},{default:an((()=>[e.draggedNode?(Qo(),or("div",{key:0,class:"baklava-dragged-node",style:F(e.draggedNodeStyles)},[dr(i,{type:e.draggedNode.type,title:e.draggedNode.nodeInformation.title},null,8,["type","title"])],4)):fr("",!0)])),_:1})],64)}]]),Nl="SAVE_SUBGRAPH",Ol="CREATE_SUBGRAPH",Ml=[yl,kl],Tl="DELETE_NODES",Al="SWITCH_TO_MAIN_GRAPH";function Pl(e,t,n){!function(e,t){t.registerCommand(Tl,{canExecute:()=>e.value.selectedNodes.length>0,execute(){e.value.selectedNodes.forEach((t=>e.value.removeNode(t)))}}),t.registerHotkey(["Delete"],Tl)}(e,t),function(e,t,n){t.registerCommand(Ol,{canExecute:()=>e.value.selectedNodes.filter((e=>!Ml.includes(e.type))).length>0,execute:()=>{const o=e.value,r=e.value.editor;if(0===o.selectedNodes.length)return;const a=o.selectedNodes.filter((e=>!Ml.includes(e.type))),i=a.flatMap((e=>Object.values(e.inputs))),s=a.flatMap((e=>Object.values(e.outputs))),l=o.connections.filter((e=>!s.includes(e.from)&&i.includes(e.to))),c=o.connections.filter((e=>s.includes(e.from)&&!i.includes(e.to))),u=o.connections.filter((e=>s.includes(e.from)&&i.includes(e.to))),d=l.map((e=>e.to)),p=c.map((e=>e.from)),h=new Map,v=[];for(const e of d){const t=Gs();h.set(e.id,t),v.push({id:t,nodeInterfaceId:e.id,name:e.name})}const f=[];for(const e of p){const t=Gs();h.set(e.id,t),f.push({id:t,nodeInterfaceId:e.id,name:e.name})}const m=lt(new si({connections:u.map((e=>({id:e.id,from:e.from.id,to:e.to.id}))),inputs:v,outputs:f,nodes:a.map((e=>e.save()))},r));r.addGraphTemplate(m);const g=r.nodeTypes.get(ii(m));if(!g)throw new Error("Unable to create subgraph: Could not find corresponding graph node type");const b=lt(new g.type);o.addNode(b);const y=Math.round(a.map((e=>e.position.x)).reduce(((e,t)=>e+t),0)/a.length),k=Math.round(a.map((e=>e.position.y)).reduce(((e,t)=>e+t),0)/a.length);b.position.x=y,b.position.y=k,l.forEach((e=>{o.removeConnection(e),o.addConnection(e.from,b.inputs[h.get(e.to.id)])})),c.forEach((e=>{o.removeConnection(e),o.addConnection(b.outputs[h.get(e.from.id)],e.to)})),a.forEach((e=>o.removeNode(e))),t.canExecuteCommand(Nl)&&t.executeCommand(Nl),n(m),e.value.panning={...o.panning},e.value.scaling=o.scaling}})}(e,t,n),function(e,t){t.registerCommand(Nl,{canExecute:()=>{var t;return e.value!==(null==(t=e.value.editor)?void 0:t.graph)},execute:()=>{const t=e.value;if(!t.template)throw new Error("Graph template property not set");const n=[],o=[],r=t.nodes.filter((e=>e.type===yl));for(const e of r){const r=t.connections.filter((t=>t.from===e.outputs.placeholder));r.forEach((t=>{o.push({id:e.graphInterfaceId,name:e.inputs.name.value,nodeInterfaceId:t.to.id})})),n.push(...r)}const a=[],i=t.nodes.filter((e=>e.type===kl));for(const e of i){const o=t.connections.filter((t=>t.to===e.inputs.placeholder));o.forEach((t=>{a.push({id:e.graphInterfaceId,name:e.inputs.name.value,nodeInterfaceId:t.from.id})})),n.push(...o)}const s=t.connections.filter((e=>!n.includes(e))),l=t.nodes.filter((e=>e.type!==yl&&e.type!==kl));t.template.update({inputs:o,outputs:a,connections:s.map((e=>({id:e.id,from:e.from.id,to:e.to.id}))),nodes:l.map((e=>e.save())),panning:t.panning,scaling:t.scaling}),t.template.panning=t.panning,t.template.scaling=t.scaling}})}(e,t),function(e,t,n){t.registerCommand(Al,{canExecute:()=>e.value!==e.value.editor.graph,execute:()=>{t.executeCommand(Nl),n(e.value.editor.graph)}})}(e,t,n)}class jl{constructor(e,t){this.type=e,"addNode"===e?this.nodeId=t:this.nodeState=t}undo(e){"addNode"===this.type?this.removeNode(e):this.addNode(e)}redo(e){"addNode"===this.type&&this.nodeState?this.addNode(e):"removeNode"===this.type&&this.nodeId&&this.removeNode(e)}addNode(e){const t=e.editor.nodeTypes.get(this.nodeState.type);if(!t)return;const n=new t.type;e.addNode(n),n.load(this.nodeState),this.nodeId=n.id}removeNode(e){const t=e.nodes.find((e=>e.id===this.nodeId));t&&(this.nodeState=t.save(),e.removeNode(t))}}class Rl{constructor(e,t){if(this.type=e,"addConnection"===e)this.connectionId=t;else{const e=t;this.connectionState={id:e.id,from:e.from.id,to:e.to.id}}}undo(e){"addConnection"===this.type?this.removeConnection(e):this.addConnection(e)}redo(e){"addConnection"===this.type&&this.connectionState?this.addConnection(e):"removeConnection"===this.type&&this.connectionId&&this.removeConnection(e)}addConnection(e){const t=e.findNodeInterface(this.connectionState.from),n=e.findNodeInterface(this.connectionState.to);t&&n&&e.addConnection(t,n)}removeConnection(e){const t=e.connections.find((e=>e.id===this.connectionId));t&&(this.connectionState={id:t.id,from:t.from.id,to:t.to.id},e.removeConnection(t))}}class $l{constructor(e){if(this.type="transaction",0===e.length)throw new Error("Can't create a transaction with no steps");this.steps=e}undo(e){for(let t=this.steps.length-1;t>=0;t--)this.steps[t].undo(e)}redo(e){for(let t=0;t<this.steps.length;t++)this.steps[t].redo(e)}}const Dl="UNDO",Ll="REDO",Ul="START_TRANSACTION",Vl="COMMIT_TRANSACTION",Fl="COPY",Hl="PASTE",Bl="CLEAR_CLIPBOARD",Gl="OPEN_SIDEBAR";function zl(e,t){!function(e,t){t.registerCommand(Gl,{execute:t=>{e.value.sidebar.nodeId=t,e.value.sidebar.visible=!0},canExecute:()=>!0})}(e,t)}const Wl={},ql={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Kl=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("path",{d:"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1"},null,-1)],Xl=ki(Wl,[["render",function(e,t){return Qo(),or("svg",ql,Kl)}]]),Yl={},Jl={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Zl=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("path",{d:"M15 13l4 -4l-4 -4m4 4h-11a4 4 0 0 0 0 8h1"},null,-1)],Ql=ki(Yl,[["render",function(e,t){return Qo(),or("svg",Jl,Zl)}]]),ec={},tc={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},nc=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),ur("line",{x1:"5",y1:"12",x2:"11",y2:"18"},null,-1),ur("line",{x1:"5",y1:"12",x2:"11",y2:"6"},null,-1)],oc=ki(ec,[["render",function(e,t){return Qo(),or("svg",tc,nc)}]]),rc={},ac={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},ic=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"},null,-1),ur("rect",{x:"9",y:"3",width:"6",height:"4",rx:"2"},null,-1)],sc=ki(rc,[["render",function(e,t){return Qo(),or("svg",ac,ic)}]]),lc={},cc={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},uc=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2"},null,-1),ur("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"},null,-1)],dc=ki(lc,[["render",function(e,t){return Qo(),or("svg",cc,uc)}]]),pc={},hc={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},vc=[ur("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ur("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"},null,-1),ur("circle",{cx:"12",cy:"14",r:"2"},null,-1),ur("polyline",{points:"14 4 14 8 8 8 8 4"},null,-1)],fc=ki(pc,[["render",function(e,t){return Qo(),or("svg",hc,vc)}]]),mc={},gc={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},bc=[vr('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 3h4v4h-4z"></path><path d="M3 17h4v4h-4z"></path><path d="M17 17h4v4h-4z"></path><path d="M7 17l5 -4l5 4"></path><line x1="12" y1="7" x2="12" y2="13"></line>',6)],yc=ki(mc,[["render",function(e,t){return Qo(),or("svg",gc,bc)}]]),kc=On({props:{command:{type:String,required:!0},title:{type:String,required:!0},icon:{type:Object,required:!1,default:void 0}},setup(){const{viewModel:e}=fi();return{viewModel:e}}}),wc=["disabled","title"],_c=On({components:{ToolbarButton:ki(kc,[["render",function(e,t,n,o,r,a){return Qo(),or("button",{class:"baklava-toolbar-entry baklava-toolbar-button",disabled:!e.viewModel.commandHandler.canExecuteCommand(e.command),title:e.title,onClick:t[0]||(t[0]=t=>e.viewModel.commandHandler.executeCommand(e.command))},[e.icon?(Qo(),rr(Jn(e.icon),{key:0})):(Qo(),or(qo,{key:1},[hr(X(e.title),1)],64))],8,wc)}]])},setup(){const{viewModel:e}=fi();return{isSubgraph:Rr((()=>e.value.displayedGraph!==e.value.editor.graph)),commands:[{command:Fl,title:"Copy",icon:dc},{command:Hl,title:"Paste",icon:sc},{command:Dl,title:"Undo",icon:Xl},{command:Ll,title:"Redo",icon:Ql},{command:Ol,title:"Create Subgraph",icon:yc}],subgraphCommands:[{command:Nl,title:"Save Subgraph",icon:fc},{command:Al,title:"Back to Main Graph",icon:oc}]}}}),xc={class:"baklava-toolbar"},Cc=On({components:{Background:wi,Node:ks,ConnectionWrapper:Es,TemporaryConnection:Is,Sidebar:Ts,Minimap:As,NodePalette:Il,Toolbar:ki(_c,[["render",function(e,t,n,o,r,a){const i=Xn("toolbar-button");return Qo(),or("div",xc,[(Qo(!0),or(qo,null,eo(e.commands,(e=>(Qo(),rr(i,{key:e.command,command:e.command,title:e.title,icon:e.icon},null,8,["command","title","icon"])))),128)),e.isSubgraph?(Qo(!0),or(qo,{key:0},eo(e.subgraphCommands,(e=>(Qo(),rr(i,{key:e.command,command:e.command,title:e.title,icon:e.icon},null,8,["command","title","icon"])))),128)):fr("",!0)])}]])},props:{viewModel:{type:Object,required:!0}},setup(e){const t=Symbol("EditorToken"),n=Mt(e,"viewModel");vi=n;const o=_t(null);Eo("editorEl",o);const r=Rr((()=>e.viewModel.displayedGraph.nodes)),a=Rr((()=>e.viewModel.displayedGraph.connections)),i=Rr((()=>e.viewModel.displayedGraph.selectedNodes)),s=function(){const{graph:e}=mi();let t=[],n=-1,o={x:0,y:0};const r=gi(Rr((()=>e.value.panning))),a=Rr((()=>({"transform-origin":"0 0",transform:`scale(${e.value.scaling}) translate(${e.value.panning.x}px, ${e.value.panning.y}px)`}))),i=(t,n,o)=>{const r=[t/e.value.scaling-e.value.panning.x,n/e.value.scaling-e.value.panning.y],a=[t/o-e.value.panning.x,n/o-e.value.panning.y],i=[a[0]-r[0],a[1]-r[1]];e.value.panning.x+=i[0],e.value.panning.y+=i[1],e.value.scaling=o},s=()=>({ax:t[0].clientX,ay:t[0].clientY,bx:t[1].clientX,by:t[1].clientY});return{styles:a,...r,onPointerDown:e=>{if(t.push(e),r.onPointerDown(e),2===t.length){const{ax:e,ay:t,bx:n,by:r}=s();o={x:e+(n-e)/2,y:t+(r-t)/2}}},onPointerMove:a=>{for(let e=0;e<t.length;e++)if(a.pointerId==t[e].pointerId){t[e]=a;break}if(2==t.length){const{ax:t,ay:r,bx:a,by:l}=s(),c=t-a,u=r-l,d=Math.sqrt(c*c+u*u);if(n>0){const t=e.value.scaling*(1+(d-n)/500);i(o.x,o.y,t)}n=d}else r.onPointerMove(a)},onPointerUp:e=>{t=t.filter((t=>t.pointerId!==e.pointerId)),n=-1,r.onPointerUp()},onMouseWheel:t=>{t.preventDefault();let n=t.deltaY;1===t.deltaMode&&(n*=32);const o=e.value.scaling*(1-n/3e3);i(t.offsetX,t.offsetY,o)}}}(),l=function(){const{graph:e}=mi(),t=_t(null),n=_t(null);return Eo("hoveredOver",(o=>{if(n.value=o??null,o&&t.value){t.value.to=o;const n=e.value.checkConnection(t.value.from,t.value.to);if(t.value.status=n.connectionAllowed?bi.ALLOWED:bi.FORBIDDEN,n.connectionAllowed){const t=n.connectionsInDanger.map((e=>e.id));e.value.connections.forEach((e=>{t.includes(e.id)&&(e.isInDanger=!0)}))}}else!o&&t.value&&(t.value.to=void 0,t.value.status=bi.NONE,e.value.connections.forEach((e=>{e.isInDanger=!1})))})),{temporaryConnection:t,onMouseMove:n=>{t.value&&(t.value.mx=n.offsetX/e.value.scaling-e.value.panning.x,t.value.my=n.offsetY/e.value.scaling-e.value.panning.y)},onMouseDown:()=>{if(n.value){const o=e.value.connections.find((e=>e.to===n.value));n.value.isInput&&o?(t.value={status:bi.NONE,from:o.from},e.value.removeConnection(o)):t.value={status:bi.NONE,from:n.value},t.value.mx=void 0,t.value.my=void 0}},onMouseUp:()=>{t.value&&n.value&&e.value.addConnection(t.value.from,t.value.to),t.value=null}}}(),c=Rr((()=>({...s.styles.value}))),u=_t(0);e.viewModel.editor.hooks.load.subscribe(t,(e=>(u.value++,e)));const d=()=>{e.viewModel.displayedGraph.selectedNodes=[]};return{el:o,counter:u,nodes:r,connections:a,selectedNodes:i,nodeContainerStyle:c,onPointerMove:e=>{s.onPointerMove(e),l.onMouseMove(e)},onPointerDown:e=>{0===e.button&&(e.target===o.value&&(d(),s.onPointerDown(e)),l.onMouseDown())},onPointerUp:e=>{s.onPointerUp(e),l.onMouseUp()},keyDown:t=>{"Tab"===t.key&&t.preventDefault(),e.viewModel.commandHandler.handleKeyDown(t)},keyUp:t=>{e.viewModel.commandHandler.handleKeyUp(t)},selectNode:t=>{e.viewModel.commandHandler.pressedKeys.includes("Control")||d(),e.viewModel.displayedGraph.selectedNodes.push(t)},temporaryConnection:l.temporaryConnection,mouseWheel:s.onMouseWheel,dragging:s.dragging}}}),Ec={class:"connections-container"},Sc=ki(Cc,[["render",function(e,t,n,o,r,a){const i=Xn("background"),s=Xn("toolbar"),l=Xn("node-palette"),c=Xn("connection-wrapper"),u=Xn("temporary-connection"),d=Xn("node"),p=Xn("sidebar"),h=Xn("minimap");return Qo(),or("div",{ref:"el",tabindex:"-1",class:W(["baklava-editor",{"baklava-ignore-mouse":!!e.temporaryConnection||e.dragging,"--temporary-connection":!!e.temporaryConnection}]),onPointermove:t[0]||(t[0]=Ta(((...t)=>e.onPointerMove&&e.onPointerMove(...t)),["self"])),onPointerdown:t[1]||(t[1]=(...t)=>e.onPointerDown&&e.onPointerDown(...t)),onPointerup:t[2]||(t[2]=(...t)=>e.onPointerUp&&e.onPointerUp(...t)),onWheel:t[3]||(t[3]=Ta(((...t)=>e.mouseWheel&&e.mouseWheel(...t)),["self"])),onKeydown:t[4]||(t[4]=(...t)=>e.keyDown&&e.keyDown(...t)),onKeyup:t[5]||(t[5]=(...t)=>e.keyUp&&e.keyUp(...t))},[to(e.$slots,"background",{},(()=>[dr(i)])),to(e.$slots,"toolbar",{},(()=>[dr(s)])),to(e.$slots,"palette",{},(()=>[dr(l)])),(Qo(),or("svg",Ec,[(Qo(!0),or(qo,null,eo(e.connections,(t=>(Qo(),or("g",{key:t.id+e.counter.toString()},[to(e.$slots,"connection",{connection:t},(()=>[dr(c,{connection:t},null,8,["connection"])]))])))),128)),to(e.$slots,"temporaryConnection",{temporaryConnection:e.temporaryConnection},(()=>[e.temporaryConnection?(Qo(),rr(u,{key:0,connection:e.temporaryConnection},null,8,["connection"])):fr("",!0)]))])),ur("div",{class:"node-container",style:F(e.nodeContainerStyle)},[dr(wa,{name:"fade"},{default:an((()=>[(Qo(!0),or(qo,null,eo(e.nodes,(t=>to(e.$slots,"node",{node:t,selected:e.selectedNodes.includes(t),onSelect:n=>e.selectNode(t)},(()=>[(Qo(),rr(d,{key:t.id+e.counter.toString(),node:t,selected:e.selectedNodes.includes(t),onSelect:n=>e.selectNode(t)},null,8,["node","selected","onSelect"]))])))),256))])),_:3})],4),to(e.$slots,"sidebar",{},(()=>[dr(p)])),to(e.$slots,"minimap",{},(()=>[e.viewModel.settings.enableMinimap?(Qo(),rr(h,{key:0})):fr("",!0)]))],34)}]]),Ic=()=>{const e=_t(new Map),t=(t,n=!1,...o)=>{if(e.value.has(t))return e.value.get(t).execute(...o);if(n)throw new Error(`[CommandHandler] Command ${t} not registered`)},n=function(e){const t=_t([]),n=_t([]);return{pressedKeys:t,handleKeyDown:o=>{t.value.includes(o.key)||t.value.push(o.key),n.value.forEach((n=>{n.keys.every((e=>t.value.includes(e)))&&e(n.commandName)}))},handleKeyUp:e=>{const n=t.value.indexOf(e.key);n>=0&&t.value.splice(n,1)},registerHotkey:(e,t)=>{n.value.push({keys:e,commandName:t})}}}(t);return lt({registerCommand:(t,n)=>{if(e.value.has(t))throw new Error(`Command "${t}" already exists`);e.value.set(t,n)},executeCommand:t,canExecuteCommand:(t,n=!1,...o)=>{if(!e.value.has(t)){if(n)throw new Error(`[CommandHandler] Command ${t} not registered`);return!1}return e.value.get(t).canExecute(o)},...n})},Nc=e=>!(e instanceof oi);function Oc(e){const t=_t(e??new class{constructor(){this.events={loaded:new za(this),beforeRegisterNodeType:new Wa(this),registerNodeType:new za(this),beforeUnregisterNodeType:new Wa(this),unregisterNodeType:new za(this),beforeAddGraphTemplate:new Wa(this),addGraphTemplate:new za(this),beforeRemoveGraphTemplate:new Wa(this),removeGraphTemplate:new za(this),registerGraph:new za(this),unregisterGraph:new za(this)},this.hooks={save:new Ka(this),load:new Ka(this)},this.graphTemplateEvents=Ya(),this.graphTemplateHooks=Ya(),this.graphEvents=Ya(),this.graphHooks=Ya(),this.nodeEvents=Ya(),this.nodeHooks=Ya(),this.connectionEvents=Ya(),this._graphs=new Set,this._nodeTypes=new Map,this._graph=new oi(this),this._graphTemplates=[],this._loading=!1}get nodeTypes(){return this._nodeTypes}get graph(){return this._graph}get graphTemplates(){return this._graphTemplates}get graphs(){return this._graphs}get loading(){return this._loading}registerNodeType(e,t){var n,o;if(this.events.beforeRegisterNodeType.emit({type:e,options:t}).prevented)return;const r=new e;this._nodeTypes.set(r.type,{type:e,category:null!==(n=null==t?void 0:t.category)&&void 0!==n?n:"default",title:null!==(o=null==t?void 0:t.title)&&void 0!==o?o:r.title}),this.events.registerNodeType.emit({type:e,options:t})}unregisterNodeType(e){const t="string"==typeof e?e:(new e).type;if(this.nodeTypes.has(t)){if(this.events.beforeUnregisterNodeType.emit(t).prevented)return;this._nodeTypes.delete(t),this.events.unregisterNodeType.emit(t)}}addGraphTemplate(e){if(this.events.beforeAddGraphTemplate.emit(e).prevented)return;this._graphTemplates.push(e),this.graphTemplateEvents.addTarget(e.events),this.graphTemplateHooks.addTarget(e.hooks);const t=function(e){return class extends ei{constructor(){super(...arguments),this.type=ii(e),this.inputs={},this.outputs={},this.template=e,this.calculate=async(e,t)=>{if(!this.subgraph)throw new Error(`GraphNode ${this.id}: calculate called without subgraph being initialized`);if("object"==typeof t.engine&&t.engine&&"function"==typeof t.engine.runGraph){const n=new Map;for(const e of this.subgraph.nodes)Object.values(e.inputs).forEach((e=>{0===e.connectionCount&&n.set(e.id,e.value)}));Object.entries(e).forEach((([e,t])=>{const o=this.subgraph.inputs.find((t=>t.id===e));n.set(o.nodeInterfaceId,t)}));const o=await t.engine.runGraph(this.subgraph,n,t.globalValues),r=new Map;o.forEach(((e,t)=>{const n=this.subgraph.nodes.find((e=>e.id===t));e.forEach(((e,t)=>{r.set(n.outputs[t].id,e)}))}));const a={};return this.subgraph.outputs.forEach((e=>{a[e.id]=r.get(e.nodeInterfaceId)})),a._calculationResults=o,a}}}get title(){return this._title}set title(e){this.template.name=e}load(e){if(!this.subgraph)throw new Error("Cannot load a graph node without a graph");if(!this.template)throw new Error("Unable to load graph node without graph template");this.subgraph.load(e.graphState),super.load(e)}save(){if(!this.subgraph)throw new Error("Cannot save a graph node without a graph");return{...super.save(),graphState:this.subgraph.save()}}onPlaced(){this.template.events.updated.subscribe(this,(()=>this.initialize())),this.template.events.nameChanged.subscribe(this,(e=>{this._title=e})),this.initialize()}onDestroy(){var e;this.template.events.updated.unsubscribe(this),this.template.events.nameChanged.unsubscribe(this),null===(e=this.subgraph)||void 0===e||e.destroy()}initialize(){this.subgraph&&this.subgraph.destroy(),this.subgraph=this.template.createGraph(),this._title=this.template.name,this.updateInterfaces(),this.events.update.emit(null)}updateInterfaces(){if(!this.subgraph)throw new Error("Trying to update interfaces without graph instance");for(const e of this.subgraph.inputs)e.id in this.inputs?this.inputs[e.id].name=e.name:this.addInput(e.id,new ri(e.name,void 0));for(const e of Object.keys(this.inputs))this.subgraph.inputs.some((t=>t.id===e))||this.removeInput(e);for(const e of this.subgraph.outputs)e.id in this.outputs?this.outputs[e.id].name=e.name:this.addOutput(e.id,new ri(e.name,void 0));for(const e of Object.keys(this.outputs))this.subgraph.outputs.some((t=>t.id===e))||this.removeOutput(e);this.addOutput("_calculationResults",new ri("_calculationResults",void 0).setHidden(!0))}}}(e);this.registerNodeType(t,{category:"Subgraphs",title:e.name}),this.events.addGraphTemplate.emit(e)}removeGraphTemplate(e){if(this.graphTemplates.includes(e)){if(this.events.beforeRemoveGraphTemplate.emit(e).prevented)return;const t=ii(e);for(const e of[this.graph,...this.graphs.values()]){const n=e.nodes.filter((e=>e.type===t));for(const t of n)e.removeNode(t)}this.unregisterNodeType(t),this._graphTemplates.splice(this._graphTemplates.indexOf(e),1),this.graphTemplateEvents.removeTarget(e.events),this.graphTemplateHooks.removeTarget(e.hooks),this.events.removeGraphTemplate.emit(e)}}registerGraph(e){this.graphEvents.addTarget(e.events),this.graphHooks.addTarget(e.hooks),this.nodeEvents.addTarget(e.nodeEvents),this.nodeHooks.addTarget(e.nodeHooks),this.connectionEvents.addTarget(e.connectionEvents),this.events.registerGraph.emit(e),this._graphs.add(e)}unregisterGraph(e){this.graphEvents.removeTarget(e.events),this.graphHooks.removeTarget(e.hooks),this.nodeEvents.removeTarget(e.nodeEvents),this.nodeHooks.removeTarget(e.nodeHooks),this.connectionEvents.removeTarget(e.connectionEvents),this.events.unregisterGraph.emit(e),this._graphs.delete(e)}load(e){try{this._loading=!0,(e=this.hooks.load.execute(e)).graphTemplates.forEach((e=>{const t=new si(e,this);this.addGraphTemplate(t)}));const t=this._graph.load(e.graph);return this.events.loaded.emit(),t.forEach((e=>console.warn(e))),t}finally{this._loading=!1}}save(){const e={graph:this.graph.save(),graphTemplates:this.graphTemplates.map((e=>e.save()))};return this.hooks.save.execute(e)}}),n=Symbol("ViewModelToken"),o=_t(null),r=ut(o,!0,Re,ot,st),{switchGraph:a}=function(e,t){return{switchGraph:n=>{let o;if(Nc(n))o=new oi(e.value),n.createGraph(o),o.inputs.forEach((e=>{const t=new wl;t.inputs.name.value=e.name,t.graphInterfaceId=e.id,o.addNode(t);const n=o.findNodeInterface(e.nodeInterfaceId);n?o.addConnection(t.outputs.placeholder,n):console.warn(`Could not find target interface ${e.nodeInterfaceId} for subgraph input node`)})),o.outputs.forEach((e=>{const t=new _l;t.inputs.name.value=e.name,t.graphInterfaceId=e.id,o.addNode(t);const n=o.findNodeInterface(e.nodeInterfaceId);n?o.addConnection(n,t.inputs.placeholder):console.warn(`Could not find target interface ${e.nodeInterfaceId} for subgraph input node`)}));else{if(n!==e.value.graph)throw new Error("Can only switch using 'Graph' instance when it is the root graph. Otherwise a 'GraphTemplate' must be used.");o=n}t.value&&t.value!==e.value.graph&&t.value.destroy(),o.panning=o.panning??n.panning??{x:0,y:0},o.scaling=o.scaling??n.scaling??1,o.selectedNodes=o.selectedNodes??[],o.sidebar=o.sidebar??{visible:!1,nodeId:"",optionName:""},t.value=o}}}(t,o),i=Rr((()=>r.value&&r.value!==t.value.graph)),s=lt({useStraightConnections:!1,enableMinimap:!1,background:{gridSize:100,gridDivision:5,subGridVisibleThreshold:.6},sidebar:{width:300,resizable:!0}}),l=Ic(),c=function(e,t){const n=Symbol("HistoryToken"),o=_t(200),r=_t([]),a=_t(!1),i=_t(-1),s=_t(!1),l=_t([]),c=e=>{if(!a.value)if(s.value)l.value.push(e);else for(i.value!==r.value.length-1&&(r.value=r.value.slice(0,i.value+1)),r.value.push(e),i.value++;r.value.length>o.value;)r.value.shift()},u=()=>0!==r.value.length&&-1!==i.value,d=()=>0!==r.value.length&&i.value<r.value.length-1;return pn(e,((e,t)=>{t&&(t.events.addNode.unsubscribe(n),t.events.removeNode.unsubscribe(n),t.events.addConnection.unsubscribe(n),t.events.removeConnection.unsubscribe(n)),e&&(e.events.addNode.subscribe(n,(e=>{c(new jl("addNode",e.id))})),e.events.removeNode.subscribe(n,(e=>{c(new jl("removeNode",e.save()))})),e.events.addConnection.subscribe(n,(e=>{c(new Rl("addConnection",e.id))})),e.events.removeConnection.subscribe(n,(e=>{c(new Rl("removeConnection",e))})))}),{immediate:!0}),t.registerCommand(Dl,{canExecute:u,execute:()=>{u()&&(a.value=!0,r.value[i.value--].undo(e.value),a.value=!1)}}),t.registerCommand(Ll,{canExecute:d,execute:()=>{d()&&(a.value=!0,r.value[++i.value].redo(e.value),a.value=!1)}}),t.registerCommand(Ul,{canExecute:()=>!s.value,execute:()=>{s.value=!0}}),t.registerCommand(Vl,{canExecute:()=>s.value,execute:()=>{s.value=!1,l.value.length>0&&(c(new $l(l.value)),l.value=[])}}),t.registerHotkey(["Control","z"],Dl),t.registerHotkey(["Control","y"],Ll),lt({maxSteps:o})}(r,l),u=function(e,t,n){const o=Symbol("ClipboardToken"),r=_t(""),a=_t(""),i=Rr((()=>!r.value)),s=(e,t,n)=>{for(const o of e){let e;if(n&&"input"!==n||(e=Object.values(o.inputs).find((e=>e.id===t))),e||n&&"output"!==n||(e=Object.values(o.outputs).find((e=>e.id===t))),e)return e}};return n.registerCommand(Fl,{canExecute:()=>!0,execute:()=>{const t=e.value.selectedNodes.flatMap((e=>[...Object.values(e.inputs),...Object.values(e.outputs)])),n=e.value.connections.filter((e=>t.includes(e.from)||t.includes(e.to))).map((e=>({from:e.from.id,to:e.to.id})));a.value=JSON.stringify(n),r.value=JSON.stringify(e.value.selectedNodes.map((e=>e.save())))}}),n.registerHotkey(["Control","c"],Fl),n.registerCommand(Hl,{canExecute:()=>!i.value,execute:()=>{if(i.value)return;const l=new Map,c=JSON.parse(r.value),u=JSON.parse(a.value),d=[],p=[],h=e.value;n.executeCommand(Ul);for(const e of c){const n=t.value.nodeTypes.get(e.type);if(!n)return void console.warn(`Node type ${e.type} not registered`);const r=new n.type,a=r.id;d.push(r);const i=e=>{Object.values(e).forEach((e=>{e.hooks.load.subscribe(o,(t=>{const n=Gs();return l.set(t.id,n),e.id=n,e.hooks.load.unsubscribe(o),t}))}))};i(r.inputs),i(r.outputs),r.hooks.beforeLoad.subscribe(o,(e=>{const t=e;return t.position&&(t.position.x+=10,t.position.y+=10),r.hooks.beforeLoad.unsubscribe(o),t})),h.addNode(r),r.load(e),r.id=a,l.set(e.id,a)}for(const e of u){const t=s(d,l.get(e.from),"output"),n=s(d,l.get(e.to),"input");if(!t||!n)continue;const o=h.addConnection(t,n);o&&p.push(o)}return n.executeCommand(Vl),{newNodes:d,newConnections:p}}}),n.registerHotkey(["Control","v"],Hl),n.registerCommand(Bl,{canExecute:()=>!0,execute:()=>{r.value="",a.value=""}}),lt({isEmpty:i})}(r,t,l),d={renderNode:new Ka(null),renderInterface:new Ka(null)};return Pl(r,l,a),zl(r,l),pn(t,((e,o)=>{o&&(o.events.registerGraph.unsubscribe(n),o.graphEvents.beforeAddNode.unsubscribe(n),e.nodeHooks.beforeLoad.unsubscribe(n),e.nodeHooks.afterSave.unsubscribe(n),e.graphTemplateHooks.beforeLoad.unsubscribe(n),e.graphTemplateHooks.afterSave.unsubscribe(n),e.graph.hooks.load.unsubscribe(n),e.graph.hooks.save.unsubscribe(n)),e&&(e.nodeHooks.beforeLoad.subscribe(n,((e,t)=>(t.position=e.position??{x:0,y:0},t.width=e.width??200,t.twoColumn=e.twoColumn??!1,e))),e.nodeHooks.afterSave.subscribe(n,((e,t)=>(e.position=t.position,e.width=t.width,e.twoColumn=t.twoColumn,e))),e.graphTemplateHooks.beforeLoad.subscribe(n,((e,t)=>(t.panning=e.panning,t.scaling=e.scaling,e))),e.graphTemplateHooks.afterSave.subscribe(n,((e,t)=>(e.panning=t.panning,e.scaling=t.scaling,e))),e.graph.hooks.load.subscribe(n,((e,t)=>(t.panning=e.panning,t.scaling=e.scaling,e))),e.graph.hooks.save.subscribe(n,((e,t)=>(e.panning=t.panning,e.scaling=t.scaling,e))),e.graphEvents.beforeAddNode.subscribe(n,(e=>function(e){e.position=e.position??{x:0,y:0},e.disablePointerEvents=!1,e.twoColumn=e.twoColumn??!1,e.width=e.width??200}(e))),t.value.registerNodeType(wl,{category:"Subgraphs"}),t.value.registerNodeType(_l,{category:"Subgraphs"}),a(e.graph))}),{immediate:!0}),lt({editor:t,displayedGraph:r,isSubgraph:i,settings:s,commandHandler:l,history:c,clipboard:u,hooks:d,switchGraph:a})}const Mc=ni({type:"DisplayNode",title:"Display",inputs:{value:()=>new ri("Value","")},outputs:{display:()=>new vl("Display","")},calculate:({value:e})=>({display:"number"==typeof e?e.toFixed(3):String(e)})}),Tc=ni({type:"MathNode",title:"Math",inputs:{operation:()=>new pl("Operation","Add",["Add","Subtract"]).setPort(!1),num1:()=>new nl("Num 1",1),num2:()=>new nl("Num 2",1)},outputs:{result:()=>new ri("Result")},calculate:({num1:e,num2:t,operation:n})=>"Add"===n?{result:e+t}:{result:e-t}}),Ac=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Pc=On({components:{"baklava-editor":Sc},setup(){const e=Oc(),t=new hi(e.editor);e.editor.registerNodeType(Tc),e.editor.registerNodeType(Mc);const n=Symbol();function o(t,n,o){const r=new t;return e.displayedGraph.addNode(r),r.position.x=n,r.position.y=o,r}t.events.afterRun.subscribe(n,(n=>{t.pause(),function(e,t){const n=new Map;t.graphs.forEach((e=>{e.nodes.forEach((e=>n.set(e.id,e)))})),e.forEach(((e,t)=>{const o=n.get(t);o&&e.forEach(((e,t)=>{const n=o.outputs[t];n&&(n.value=e)}))}))}(n,e.editor),t.resume()})),t.start();const r=o(Tc,300,140),a=o(Mc,550,140);return e.displayedGraph.addConnection(r.outputs.result,a.inputs.value),{baklava:e}}}),jc={style:{width:"100vw",height:"100vh"}};((...e)=>{const t=(Da||(Da=Go($a))).createApp(...e),{mount:n}=t;return t.mount=e=>{const o=function(e){return g(e)?document.querySelector(e):e}(e);if(!o)return;const r=t._component;m(r)||r.render||r.template||(r.template=o.innerHTML),o.innerHTML="";const a=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t})(Ac(Pc,[["render",function(e,t,n,o,r,a){const i=Xn("baklava-editor");return Qo(),or("div",jc,[dr(i,{"view-model":e.baklava},null,8,["view-model"])])}]])).mount("#app")}}}));
